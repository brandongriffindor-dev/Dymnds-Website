(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,76289,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(57688),l=e.i(53699);e.i(36180);var a=e.i(98925);e.i(61086);var i=e.i(27215),o=e.i(94008);function n(){let e,n=()=>{let e=(0,l.getAuthClient)();return e?.currentUser?.email||"unknown"},[d,c]=(0,r.useState)([]),[u,p]=(0,r.useState)(!0),[x,h]=(0,r.useState)(""),[m,b]=(0,r.useState)(null),[g,w]=(0,r.useState)(!1),[f,j]=(0,r.useState)(""),[v,y]=(0,r.useState)(!1),[N,k]=(0,r.useState)(!1),[S,C]=(0,r.useState)(!1),[X,L]=(0,r.useState)(0),[D,I]=(0,r.useState)([]),[O,_]=(0,r.useState)(new Set),[T,A]=(0,r.useState)(!1),M=(0,r.useRef)({}),[z,E]=(0,r.useState)(!1),[$,P]=(0,r.useState)(null),[U,H]=(0,r.useState)(""),[F,R]=(0,r.useState)(0),[B,W]=(0,r.useState)(""),[G,q]=(0,r.useState)(null),[K,V]=(0,r.useState)({slug:"",title:"",subtitle:"",price:0,stock:{XS:0,S:0,M:0,L:0,XL:0,XXL:0},category:"Men",productType:"Tops",displayOrder:1,featured:!1,newArrival:!1,bestSeller:!1,description:"",features:[],modelSize:"",modelHeight:"",deliveryInfo:"Free shipping on orders over $100. Delivery in 3-5 business days.",returnsInfo:"30-day hassle-free returns. Items must be unworn with tags attached.",matchingSetSlug:"",sizeGuide:{chest:{XS:'32-34"',S:'35-37"',M:'38-40"',L:'41-43"',XL:'44-46"',XXL:'47-49"'},waist:{XS:'26-28"',S:'29-31"',M:'32-34"',L:'35-37"',XL:'38-40"',XXL:'41-43"'}},colors:[],imageUrl:"",images:[]});(0,r.useEffect)(()=>{if(K.title&&!K.slug){let e=K.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");V(t=>({...t,slug:e}))}},[K.title]);let J=async()=>{p(!0);try{let e=[];try{let t=(0,a.query)((0,a.collection)(l.db,"products"),(0,a.orderBy)("displayOrder","asc"));e=(await (0,a.getDocs)(t)).docs.map(e=>({id:e.id,...e.data()}))}catch{(e=(await (0,a.getDocs)((0,a.collection)(l.db,"products"))).docs.map(e=>({id:e.id,...e.data()}))).sort((e,t)=>(e.displayOrder||999)-(t.displayOrder||999))}c(e)}catch(e){console.error("Error fetching products:",e)}p(!1)};(0,r.useEffect)(()=>{J()},[]);let Q=async(e,t,r,s,i)=>{let o=d.find(t=>t.id===e);if(o)try{if(i&&o.colors){let u=o.colors.findIndex(e=>e.name===i);if(-1===u)return;let p=o.colors[u].stock?.[t]||0,x=[...o.colors];x[u]={...x[u],stock:{...x[u].stock,[t]:r}};let h={XS:0,S:0,M:0,L:0,XL:0,XXL:0};x.forEach(e=>{["XS","S","M","L","XL","XXL"].forEach(t=>{h[t]+=e.stock?.[t]||0})}),await (0,a.updateDoc)((0,a.doc)(l.db,"products",e),{colors:x,stock:h,updated_at:new Date().toISOString()}),await (0,a.addDoc)((0,a.collection)(l.db,"inventory_logs"),{product_id:e,product_name:o.title,color:i,size:t,old_stock:p,new_stock:r,change:r-p,reason:s||"Manual adjustment",user_email:n(),created_at:new Date().toISOString()}),c(d.map(t=>t.id===e?{...t,colors:x,stock:h}:t))}else{let i=o.stock?.[t]||0,u={...o.stock,[t]:r};await (0,a.updateDoc)((0,a.doc)(l.db,"products",e),{stock:u,updated_at:new Date().toISOString()}),await (0,a.addDoc)((0,a.collection)(l.db,"inventory_logs"),{product_id:e,product_name:o.title,size:t,old_stock:i,new_stock:r,change:r-i,reason:s||"Manual adjustment",user_email:n(),created_at:new Date().toISOString()}),c(d.map(t=>t.id===e?{...t,stock:u}:t))}}catch(e){console.error("Error updating stock:",e),alert("Failed to update stock: "+(e?.message||"Unknown error"))}},Y=async e=>{if(confirm("Archive this product? It will be hidden but preserved for order history."))try{let t=new Date().toISOString();await (0,a.updateDoc)((0,a.doc)(l.db,"products",e),{is_deleted:!0,deleted_at:t,is_active:!1,updated_at:t}),c(d.filter(t=>t.id!==e)),(0,o.logAdminAction)("product_deleted",{productId:e,soft:!0},n())}catch(e){console.error("Error archiving product:",e),alert("Failed to archive product")}},Z=async(e,t)=>{let r=d.find(t=>t.id===e);if(!r)return;let s=r.displayOrder||1;if(t!==s)try{if(t<s)for(let r of d.filter(r=>r.id!==e&&(r.displayOrder||1)>=t&&(r.displayOrder||1)<s))await (0,a.updateDoc)((0,a.doc)(l.db,"products",r.id),{displayOrder:(r.displayOrder||1)+1,updated_at:new Date().toISOString()});else for(let r of d.filter(r=>r.id!==e&&(r.displayOrder||1)<=t&&(r.displayOrder||1)>s))await (0,a.updateDoc)((0,a.doc)(l.db,"products",r.id),{displayOrder:(r.displayOrder||1)-1,updated_at:new Date().toISOString()});await (0,a.updateDoc)((0,a.doc)(l.db,"products",e),{displayOrder:t,updated_at:new Date().toISOString()}),await J()}catch(e){console.error("Error updating display order:",e)}},ee=async e=>{let t=!e.featured;try{if(t){let t=d.filter(t=>t.category===e.category&&t.featured&&t.id!==e.id);if(t.length>=3){let e=t.sort((e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime())[0];await (0,a.updateDoc)((0,a.doc)(l.db,"products",e.id),{featured:!1,updated_at:new Date().toISOString()}),c(t=>t.map(t=>t.id===e.id?{...t,featured:!1}:t))}}await (0,a.updateDoc)((0,a.doc)(l.db,"products",e.id),{featured:t,updated_at:new Date().toISOString()}),c(r=>r.map(r=>r.id===e.id?{...r,featured:t}:r))}catch(e){console.error("Error toggling featured:",e)}},et=async e=>{let t=!e.newArrival;try{await (0,a.updateDoc)((0,a.doc)(l.db,"products",e.id),{newArrival:t,updated_at:new Date().toISOString()}),c(r=>r.map(r=>r.id===e.id?{...r,newArrival:t}:r))}catch(e){console.error("Error toggling new arrival:",e)}},er=async e=>{let t=!e.bestSeller;try{await (0,a.updateDoc)((0,a.doc)(l.db,"products",e.id),{bestSeller:t,updated_at:new Date().toISOString()}),c(r=>r.map(r=>r.id===e.id?{...r,bestSeller:t}:r))}catch(e){console.error("Error toggling best seller:",e)}},es=async e=>{try{let t={title:e.title,subtitle:e.subtitle,price:e.price,category:e.category,description:e.description||"",features:e.features||[],modelSize:e.modelSize||"",modelHeight:e.modelHeight||"",deliveryInfo:e.deliveryInfo||"",returnsInfo:e.returnsInfo||"",matchingSetSlug:e.matchingSetSlug||"",updated_at:new Date().toISOString()};e.productType&&(t.productType=e.productType),await (0,a.updateDoc)((0,a.doc)(l.db,"products",e.id),t),(0,o.logAdminAction)("product_updated",{productId:e.id,title:e.title,price:e.price,category:e.category},n()),c(r=>r.map(r=>r.id===e.id?{...r,...t}:r)),b(null),alert("Product updated successfully")}catch(e){console.error("Error updating product:",e),alert("Failed to update product")}},el=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?C(!0):"dragleave"===e.type&&C(!1)},[]),ea=(0,r.useCallback)(async e=>{e.preventDefault(),e.stopPropagation(),C(!1),e.dataTransfer.files?.length>0&&await ei(e.dataTransfer.files)},[]),ei=async e=>{k(!0);let t=[];for(let r of Array.from(e))if(r.type.startsWith("image/"))try{let e=(0,i.ref)(l.storage,`products/${Date.now()}_${r.name}`);await (0,i.uploadBytes)(e,r);let s=await (0,i.getDownloadURL)(e);t.push(s)}catch(e){console.error("Error uploading:",e)}V(e=>({...e,images:[...e.images,...t]})),k(!1)},eo=async e=>{e.target.files&&await ei(e.target.files)},en=async()=>{if(j(""),y(!0),!K.slug.trim()){j("Slug is required"),y(!1);return}if(!K.title.trim()){j("Title is required"),y(!1);return}if(K.price<=0){j("Price must be greater than 0"),y(!1);return}let e=new Promise((e,t)=>setTimeout(()=>t(Error("Request timed out")),1e4));try{let t=K.displayOrder||1;for(let e of d.filter(e=>e.displayOrder>=t))await (0,a.updateDoc)((0,a.doc)(l.db,"products",e.id),{displayOrder:e.displayOrder+1,updated_at:new Date().toISOString()});let r=K.colors.length>0?K.colors.map(e=>({name:e.name,hex:e.hex,images:e.images.length>0?e.images:K.images,stock:e.stock})):void 0,s={slug:K.slug.trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""),title:K.title.trim(),subtitle:K.subtitle.trim(),price:K.price,category:K.category,productType:K.productType,displayOrder:t,featured:K.featured,newArrival:K.newArrival,bestSeller:K.bestSeller,description:K.description,features:K.features.filter(e=>e.trim()),modelSize:K.modelSize,modelHeight:K.modelHeight,deliveryInfo:K.deliveryInfo,returnsInfo:K.returnsInfo,matchingSetSlug:K.matchingSetSlug,sizeGuide:K.sizeGuide,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};if(r){s.colors=r;let e={XS:0,S:0,M:0,L:0,XL:0,XXL:0};r.forEach(t=>{["XS","S","M","L","XL","XXL"].forEach(r=>{e[r]+=t.stock[r]||0})}),s.stock=e}else s.stock=K.stock,s.images=K.images.length>0?K.images:K.imageUrl?[K.imageUrl]:[];let i=await Promise.race([(0,a.addDoc)((0,a.collection)(l.db,"products"),s),e]);(0,o.logAdminAction)("product_created",{productId:i.id,title:K.title,slug:s.slug,price:K.price,category:K.category},n()),await J(),w(!1),V({slug:"",title:"",subtitle:"",price:0,stock:{XS:0,S:0,M:0,L:0,XL:0,XXL:0},category:"Men",productType:"Tops",displayOrder:1,featured:!1,newArrival:!1,bestSeller:!1,description:"",features:[],modelSize:"",modelHeight:"",deliveryInfo:"Free shipping on orders over $100. Delivery in 3-5 business days.",returnsInfo:"30-day hassle-free returns. Items must be unworn with tags attached.",matchingSetSlug:"",sizeGuide:{chest:{XS:'32-34"',S:'35-37"',M:'38-40"',L:'41-43"',XL:'44-46"',XXL:'47-49"'},waist:{XS:'26-28"',S:'29-31"',M:'32-34"',L:'35-37"',XL:'38-40"',XXL:'41-43"'}},colors:[],imageUrl:"",images:[]}),L(0)}catch(e){j(`Failed: ${e?.message||"Unknown error"}`)}finally{y(!1)}};return u?(0,t.jsx)("div",{className:"flex items-center justify-center py-32",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-10 h-10 border-2 border-white/20 border-t-white rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-white/30 text-sm",children:"Loading products..."})]})}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-4xl font-bebas tracking-wider",children:"Inventory Commander"}),(0,t.jsxs)("p",{className:"text-white/25 text-sm mt-1",children:[d.length," products"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/25 text-sm",children:"⌕"}),(0,t.jsx)("input",{type:"text",value:x,onChange:e=>h(e.target.value),placeholder:"Search products...",className:"input-premium pl-9 pr-4 py-2.5 bg-white/[0.03] border border-white/[0.08] rounded-xl text-sm focus:outline-none w-56"})]}),(0,t.jsx)("button",{onClick:()=>{w(!0),j("")},className:"btn-premium px-5 py-2.5 bg-white text-black text-sm font-bold tracking-wider uppercase rounded-xl hover:bg-white/90 transition-colors",children:"+ Add Product"})]})]}),D.length>0&&(0,t.jsxs)("div",{className:"mb-4 p-4 bg-white/[0.03] border border-white/[0.08] rounded-xl flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"text-white/50 text-sm",children:[D.length," selected"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>A(!0),className:"px-4 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors text-sm",children:"Delete Selected"}),(0,t.jsx)("button",{onClick:()=>I([]),className:"px-4 py-2 bg-white/[0.06] text-white/50 rounded-lg hover:bg-white/[0.1] transition-colors text-sm",children:"Clear"})]})]}),(0,t.jsx)("div",{className:"bg-white/[0.02] border border-white/[0.06] rounded-2xl overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full min-w-[800px]",children:[(0,t.jsx)("thead",{className:"bg-white/[0.03] border-b border-white/[0.06]",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-center p-4 text-[10px] uppercase tracking-widest text-white/25",children:"Sel"}),(0,t.jsx)("th",{className:"text-center p-4 text-[10px] uppercase tracking-widest text-white/25",children:"#"}),(0,t.jsx)("th",{className:"text-center p-4 text-[10px] uppercase tracking-widest text-white/25",children:"★"}),(0,t.jsx)("th",{className:"text-center p-4 text-[10px] uppercase tracking-widest text-white/25",children:"New"}),(0,t.jsx)("th",{className:"text-center p-4 text-[10px] uppercase tracking-widest text-white/25",children:"Top"}),(0,t.jsx)("th",{className:"text-left p-4 text-[10px] uppercase tracking-widest text-white/25",children:"Product"}),(0,t.jsx)("th",{className:"text-center p-4 text-[10px] uppercase tracking-widest text-white/25",children:"Type"}),["XS","S","M","L","XL","XXL"].map(e=>(0,t.jsx)("th",{className:"text-center p-4 text-[10px] uppercase tracking-widest text-white/25",children:e},e)),(0,t.jsx)("th",{className:"text-center p-4 text-[10px] uppercase tracking-widest text-white/25",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:(e=[],d.filter(e=>!x||e.title?.toLowerCase().includes(x.toLowerCase())||e.slug?.toLowerCase().includes(x.toLowerCase())||e.category?.toLowerCase().includes(x.toLowerCase())).forEach(r=>{let s=r.colors||[],l=s.length>0,a=O.has(r.id);e.push((0,t.jsxs)("tr",{className:"border-b border-white/[0.04] hover:bg-white/[0.02] transition-colors",children:[(0,t.jsx)("td",{className:"p-4 text-center",children:(0,t.jsx)("input",{type:"checkbox",checked:D.includes(r.id),onChange:e=>e.target.checked?I([...D,r.id]):I(D.filter(e=>e!==r.id)),className:"w-4 h-4 rounded border-white/20 bg-black accent-white"})}),(0,t.jsx)("td",{className:"p-4 text-center",children:(0,t.jsx)("input",{type:"number",min:1,defaultValue:r.displayOrder||1,onChange:e=>{let t=parseInt(e.target.value)||1,s=r.id;M.current[s]&&clearTimeout(M.current[s]),M.current[s]=setTimeout(()=>Z(s,t),800)},onKeyDown:e=>{if("Enter"===e.key){let t=r.id;M.current[t]&&clearTimeout(M.current[t]),Z(t,parseInt(e.target.value)||1)}},className:"w-12 text-center bg-black/50 border border-white/[0.1] rounded-lg px-2 py-1 text-sm focus:border-white/30 focus:outline-none"})}),(0,t.jsx)("td",{className:"p-4 text-center",children:(0,t.jsx)("button",{onClick:()=>ee(r),className:`transition-colors ${r.featured?"text-amber-400 hover:text-amber-300":"text-white/15 hover:text-white/30"}`,children:r.featured?"★":"☆"})}),(0,t.jsx)("td",{className:"p-4 text-center",children:(0,t.jsx)("button",{onClick:()=>et(r),className:`text-xs font-bold transition-colors ${r.newArrival?"text-emerald-400":"text-white/15 hover:text-white/30"}`,children:r.newArrival?"NEW":"—"})}),(0,t.jsx)("td",{className:"p-4 text-center",children:(0,t.jsx)("button",{onClick:()=>er(r),className:`text-xs font-bold transition-colors ${r.bestSeller?"text-amber-400":"text-white/15 hover:text-white/30"}`,children:r.bestSeller?"TOP":"—"})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("button",{onClick:()=>b(r),className:"text-left hover:text-white/70 transition-colors",children:[(0,t.jsx)("p",{className:"font-medium",children:r.title}),(0,t.jsxs)("p",{className:"text-white/30 text-xs",children:["$",r.price," · ",r.category,l?` \xb7 ${s.length} colors`:""]})]})}),(0,t.jsx)("td",{className:"p-4 text-center",children:(0,t.jsx)("span",{className:"text-white/40 text-xs",children:r.productType||"—"})}),["XS","S","M","L","XL","XXL"].map(e=>{let a=l?s.reduce((t,r)=>t+(r.stock?.[e]||0),0):r.stock?.[e]||0;return(0,t.jsx)("td",{className:"p-4",children:(0,t.jsx)("button",{onClick:()=>{P(r),H(e),R(a),q(null),W(""),E(!0)},className:`w-14 text-center bg-black/50 border rounded-lg px-2 py-1 text-sm hover:border-white/30 transition-colors ${0===a?"text-red-400 border-red-500/40":a<5?"text-amber-400 border-amber-500/30":"border-white/[0.1]"}`,children:a})},e)}),(0,t.jsx)("td",{className:"p-4 text-center",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 justify-center",children:[l&&(0,t.jsx)("button",{onClick:()=>{let e=new Set(O);a?e.delete(r.id):e.add(r.id),_(e)},className:"p-2 bg-white/[0.06] rounded-lg hover:bg-white/[0.1] transition-colors text-xs",children:a?"▲":"▼"}),(0,t.jsx)("button",{onClick:()=>Y(r.id),className:"px-3 py-1.5 bg-red-500/15 text-red-400 text-xs rounded-lg hover:bg-red-500/25 transition-colors",children:"Del"})]})})]},r.id)),a&&l&&s.forEach(s=>{e.push((0,t.jsxs)("tr",{className:"border-b border-white/[0.03] bg-white/[0.01]",children:[(0,t.jsx)("td",{className:"p-4 text-center",children:(0,t.jsx)("div",{className:"w-4 h-4 rounded-full border border-white/20 mx-auto",style:{backgroundColor:s.hex}})}),(0,t.jsx)("td",{className:"p-4",colSpan:4,children:(0,t.jsxs)("span",{className:"text-white/40 text-sm ml-4",children:["↳ ",s.name]})}),(0,t.jsx)("td",{className:"p-4 text-center",children:(0,t.jsx)("span",{className:"text-white/20 text-xs",children:"Variant"})}),(0,t.jsx)("td",{className:"p-4 text-center"}),["XS","S","M","L","XL","XXL"].map(e=>{let l=s.stock?.[e]||0;return(0,t.jsx)("td",{className:"p-4",children:(0,t.jsx)("button",{onClick:()=>{P(r),H(e),R(l),q(s.name),W(`Updating ${s.name}`),E(!0)},className:`w-14 text-center bg-black/30 border rounded-lg px-2 py-1 text-sm hover:border-white/30 transition-colors ${0===l?"text-red-400 border-red-500/40":l<5?"text-amber-400 border-amber-500/30":"border-white/[0.06]"}`,children:l})},e)}),(0,t.jsx)("td",{className:"p-4 text-center",children:(0,t.jsx)("span",{className:"text-white/15 text-xs",children:"—"})})]},`${r.id}-${s.name}`))})}),e)})]})}),z&&$&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"modal-panel bg-neutral-950 border border-white/[0.08] rounded-2xl p-8 w-full max-w-md",children:[(0,t.jsx)("h3",{className:"text-2xl font-bebas tracking-wider mb-6",children:"Update Stock"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-white/[0.03] rounded-xl",children:[(0,t.jsx)("p",{className:"text-white/30 text-sm",children:"Product"}),(0,t.jsx)("p",{className:"font-medium",children:$.title}),G&&(0,t.jsxs)("p",{className:"text-sm text-amber-400 mt-1",children:["Color: ",G]})]}),(0,t.jsxs)("div",{className:"p-4 bg-white/[0.03] rounded-xl",children:[(0,t.jsx)("p",{className:"text-white/30 text-sm",children:"Size"}),(0,t.jsx)("p",{className:"font-medium text-xl",children:U})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"New Stock Amount"}),(0,t.jsx)("input",{type:"number",min:0,value:F,onChange:e=>R(parseInt(e.target.value)||0),className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 text-lg text-center focus:outline-none",autoFocus:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Reason (optional)"}),(0,t.jsx)("input",{type:"text",value:B,onChange:e=>W(e.target.value),placeholder:"e.g., New shipment arrived",className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none"})]})]}),(0,t.jsxs)("div",{className:"flex gap-4 mt-8",children:[(0,t.jsx)("button",{onClick:()=>{E(!1),P(null),q(null)},className:"flex-1 py-3 border border-white/[0.1] rounded-xl hover:bg-white/[0.03] transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:async()=>{await Q($.id,U,F,B,G||void 0),E(!1),P(null),q(null)},className:"btn-premium flex-1 py-3 bg-white text-black rounded-xl hover:bg-white/90 transition-colors font-bold",children:"Update"})]})]})}),m&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"modal-panel bg-neutral-950 border border-white/[0.08] rounded-2xl p-8 w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)("h3",{className:"text-2xl font-bebas tracking-wider mb-6",children:"Edit Product"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Title"}),(0,t.jsx)("input",{type:"text",value:m.title,onChange:e=>b({...m,title:e.target.value}),className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Subtitle"}),(0,t.jsx)("input",{type:"text",value:m.subtitle,onChange:e=>b({...m,subtitle:e.target.value}),className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Price"}),(0,t.jsx)("input",{type:"number",value:m.price,onChange:e=>b({...m,price:parseFloat(e.target.value)}),className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Category"}),(0,t.jsxs)("select",{value:m.category,onChange:e=>b({...m,category:e.target.value}),className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none",children:[(0,t.jsx)("option",{value:"Men",children:"Men"}),(0,t.jsx)("option",{value:"Women",children:"Women"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Description"}),(0,t.jsx)("textarea",{value:m.description||"",onChange:e=>b({...m,...m,description:e.target.value}),rows:3,className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none resize-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Model Size"}),(0,t.jsx)("input",{type:"text",value:m.modelSize||"",onChange:e=>b({...m,...m,modelSize:e.target.value}),className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Model Height"}),(0,t.jsx)("input",{type:"text",value:m.modelHeight||"",onChange:e=>b({...m,...m,modelHeight:e.target.value}),className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Delivery Info"}),(0,t.jsx)("input",{type:"text",value:m.deliveryInfo||"",onChange:e=>b({...m,...m,deliveryInfo:e.target.value}),className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Returns Info"}),(0,t.jsx)("input",{type:"text",value:m.returnsInfo||"",onChange:e=>b({...m,...m,returnsInfo:e.target.value}),className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Matching Set Slug"}),(0,t.jsx)("input",{type:"text",value:m.matchingSetSlug||"",onChange:e=>b({...m,...m,matchingSetSlug:e.target.value}),className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none"})]})]}),(0,t.jsxs)("div",{className:"flex gap-4 mt-8",children:[(0,t.jsx)("button",{onClick:()=>b(null),className:"flex-1 py-3 border border-white/[0.1] rounded-xl hover:bg-white/[0.03] transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>es(m),className:"btn-premium flex-1 py-3 bg-white text-black rounded-xl hover:bg-white/90 transition-colors font-bold",children:"Save"})]})]})}),T&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"modal-panel bg-neutral-950 border border-white/[0.08] rounded-2xl p-8 w-full max-w-md",children:[(0,t.jsxs)("h3",{className:"text-2xl font-bebas tracking-wider mb-4 text-red-400",children:["Archive ",D.length," Products?"]}),(0,t.jsx)("p",{className:"text-white/40 mb-6",children:"Products will be hidden but preserved for order history."}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{onClick:()=>A(!1),className:"flex-1 py-3 border border-white/[0.1] rounded-xl hover:bg-white/[0.03] transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:async()=>{let e=new Date().toISOString();for(let t of D)try{await (0,a.updateDoc)((0,a.doc)(l.db,"products",t),{is_deleted:!0,deleted_at:e,is_active:!1,updated_at:e})}catch(e){console.error(e)}(0,o.logAdminAction)("bulk_delete",{type:"products",count:D.length,soft:!0},n()),c(e=>e.filter(e=>!D.includes(e.id))),I([]),A(!1)},className:"flex-1 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-bold",children:"Archive"})]})]})}),g&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"modal-panel bg-neutral-950 border border-white/[0.08] rounded-2xl p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)("h3",{className:"text-2xl font-bebas tracking-wider mb-6",children:"Add New Product"}),f&&(0,t.jsx)("div",{className:"mb-4 p-4 bg-red-500/10 border border-red-500/20 rounded-xl text-red-400 text-sm",children:f}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Category"}),(0,t.jsxs)("select",{value:K.category,onChange:e=>V({...K,category:e.target.value}),className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none",children:[(0,t.jsx)("option",{value:"Men",children:"Men"}),(0,t.jsx)("option",{value:"Women",children:"Women"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Type"}),(0,t.jsxs)("select",{value:K.productType,onChange:e=>V({...K,productType:e.target.value}),className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none",children:[(0,t.jsx)("option",{value:"Tops",children:"Tops"}),(0,t.jsx)("option",{value:"Bottoms",children:"Bottoms"}),(0,t.jsx)("option",{value:"Outerwear",children:"Outerwear"}),(0,t.jsx)("option",{value:"Leggings",children:"Leggings"}),(0,t.jsx)("option",{value:"Shorts",children:"Shorts"}),(0,t.jsx)("option",{value:"Hoodies",children:"Hoodies"}),(0,t.jsx)("option",{value:"T-Shirts",children:"T-Shirts"}),(0,t.jsx)("option",{value:"Tank Tops",children:"Tank Tops"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Slug *"}),(0,t.jsx)("input",{type:"text",value:K.slug,onChange:e=>V({...K,slug:e.target.value}),placeholder:"heavy-hoodie",className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none"}),(0,t.jsx)("p",{className:"text-white/20 text-xs mt-1",children:"/products/your-slug"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Title *"}),(0,t.jsx)("input",{type:"text",value:K.title,onChange:e=>V({...K,title:e.target.value}),placeholder:"Heavy Hoodie",className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Subtitle"}),(0,t.jsx)("input",{type:"text",value:K.subtitle,onChange:e=>V({...K,subtitle:e.target.value}),className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Price *"}),(0,t.jsx)("input",{type:"number",value:K.price||"",onChange:e=>V({...K,price:parseFloat(e.target.value)||0}),className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Display Position"}),(0,t.jsx)("input",{type:"number",min:1,value:K.displayOrder||"",onChange:e=>V({...K,displayOrder:parseInt(e.target.value)||1}),className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none"})]})]}),(0,t.jsxs)("div",{className:"border-t border-white/[0.06] pt-4 mt-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-white/40 mb-4",children:"Details"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Description"}),(0,t.jsx)("textarea",{value:K.description,onChange:e=>V({...K,description:e.target.value}),rows:3,className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none resize-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Features (one per line)"}),(0,t.jsx)("textarea",{value:K.features.join("\n"),onChange:e=>V({...K,features:e.target.value.split("\n").filter(e=>e.trim())}),rows:3,className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none resize-none"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Model Size"}),(0,t.jsx)("input",{type:"text",value:K.modelSize,onChange:e=>V({...K,modelSize:e.target.value}),className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Model Height"}),(0,t.jsx)("input",{type:"text",value:K.modelHeight,onChange:e=>V({...K,modelHeight:e.target.value}),className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Matching Set Slug"}),(0,t.jsx)("input",{type:"text",value:K.matchingSetSlug,onChange:e=>V({...K,matchingSetSlug:e.target.value}),className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Delivery Info"}),(0,t.jsx)("input",{type:"text",value:K.deliveryInfo,onChange:e=>V({...K,deliveryInfo:e.target.value}),className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Returns Info"}),(0,t.jsx)("input",{type:"text",value:K.returnsInfo,onChange:e=>V({...K,returnsInfo:e.target.value}),className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none"})]})]})]}),0===K.colors.length&&(0,t.jsxs)("div",{className:"border-t border-white/[0.06] pt-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-white/40 mb-4",children:"Stock by Size"}),(0,t.jsx)("div",{className:"grid grid-cols-6 gap-3",children:["XS","S","M","L","XL","XXL"].map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] text-white/25 text-center mb-1",children:e}),(0,t.jsx)("input",{type:"number",min:0,value:K.stock[e]||0,onChange:t=>{let r={...K.stock};r[e]=parseInt(t.target.value)||0,V({...K,stock:r})},className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-lg px-2 py-2 text-center text-sm focus:outline-none"})]},e))})]}),(0,t.jsxs)("div",{className:"border-t border-white/[0.06] pt-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-white/40",children:"Colors"}),(0,t.jsx)("button",{type:"button",onClick:()=>{V({...K,colors:[...K.colors,{name:["Black","White","Navy","Gray","Red","Blue","Green"][K.colors.length]||`Color ${K.colors.length+1}`,hex:"#000000",images:[],stock:{XS:0,S:0,M:0,L:0,XL:0,XXL:0}}]}),L(K.colors.length)},className:"px-3 py-1 bg-white/[0.06] text-xs rounded-lg hover:bg-white/[0.1] transition-colors",children:"+ Add Color"})]}),0===K.colors.length?(0,t.jsx)("p",{className:"text-white/25 text-sm",children:"No colors. Add to manage variants."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex gap-2 flex-wrap mb-4",children:K.colors.map((e,r)=>(0,t.jsxs)("button",{onClick:()=>L(r),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-all ${X===r?"bg-white/[0.12] border border-white/30":"bg-white/[0.04] border border-transparent hover:bg-white/[0.08]"}`,children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full border border-white/20",style:{backgroundColor:e.hex}}),(0,t.jsx)("span",{children:e.name})]},r))}),K.colors[X]&&(0,t.jsxs)("div",{className:"p-4 bg-white/[0.03] rounded-xl space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Name"}),(0,t.jsx)("input",{type:"text",value:K.colors[X].name,onChange:e=>{let t=[...K.colors];t[X].name=e.target.value,V({...K,colors:t})},className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Hex"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"color",value:K.colors[X].hex,onChange:e=>{let t=[...K.colors];t[X].hex=e.target.value,V({...K,colors:t})},className:"w-12 h-12 bg-transparent border border-white/20 rounded cursor-pointer"}),(0,t.jsx)("input",{type:"text",value:K.colors[X].hex,onChange:e=>{let t=[...K.colors];t[X].hex=e.target.value,V({...K,colors:t})},className:"input-premium flex-1 bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none uppercase"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Images"}),(0,t.jsx)("div",{className:"flex gap-2 flex-wrap mb-2",children:K.colors[X].images.map((e,r)=>(0,t.jsxs)("div",{className:"relative w-16 h-16",children:[(0,t.jsx)(s.default,{src:e,alt:"",fill:!0,className:"object-cover rounded-lg",sizes:"64px"}),(0,t.jsx)("button",{onClick:()=>{let e=[...K.colors];e[X].images=e[X].images.filter((e,t)=>t!==r),V({...K,colors:e})},className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white rounded-full text-xs flex items-center justify-center",children:"×"})]},r))}),(0,t.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:async e=>{if(!e.target.files)return;k(!0);let t=[];for(let r of Array.from(e.target.files))try{let e=(0,i.ref)(l.storage,`products/${Date.now()}_${r.name}`);await (0,i.uploadBytes)(e,r),t.push(await (0,i.getDownloadURL)(e))}catch(e){console.error(e)}let r=[...K.colors];r[X].images=[...r[X].images,...t],V({...K,colors:r}),k(!1)},className:"text-sm text-white/40"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Stock"}),(0,t.jsx)("div",{className:"grid grid-cols-6 gap-2",children:["XS","S","M","L","XL","XXL"].map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] text-white/25 text-center mb-1",children:e}),(0,t.jsx)("input",{type:"number",min:0,value:K.colors[X].stock[e],onChange:t=>{let r=[...K.colors];r[X].stock[e]=parseInt(t.target.value)||0,V({...K,colors:r})},className:"w-full bg-black/50 border border-white/[0.1] rounded-lg px-2 py-2 text-center text-sm focus:outline-none"})]},e))})]}),(0,t.jsx)("button",{onClick:()=>{V({...K,colors:K.colors.filter((e,t)=>t!==X)}),L(Math.max(0,X-1))},className:"text-red-400 text-xs hover:text-red-300",children:"Remove color"})]})]})]}),(0,t.jsxs)("div",{className:K.colors.length>0?"opacity-30 pointer-events-none":"",children:[(0,t.jsxs)("label",{className:"block text-[10px] uppercase tracking-widest text-white/25 mb-2",children:["Images ",K.colors.length>0&&"(use color images)"]}),(0,t.jsxs)("div",{onDragEnter:el,onDragLeave:el,onDragOver:el,onDrop:ea,className:`border-2 border-dashed rounded-xl p-8 text-center transition-all ${S?"border-white bg-white/[0.03]":"border-white/[0.1] hover:border-white/20"}`,children:[(0,t.jsx)("p",{className:"text-white/30 text-sm mb-2",children:"Drag & drop images here"}),(0,t.jsx)("input",{type:"file",multiple:!0,accept:"image/png,image/jpeg",onChange:eo,className:"hidden",id:"img-upload"}),(0,t.jsx)("label",{htmlFor:"img-upload",className:"inline-block px-4 py-2 bg-white/[0.06] rounded-lg text-sm cursor-pointer hover:bg-white/[0.1] transition-colors",children:"Select Images"})]}),N&&(0,t.jsxs)("div",{className:"mt-3 flex items-center gap-2 text-white/40 text-sm",children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Uploading..."]}),K.images.length>0&&(0,t.jsx)("div",{className:"mt-4 flex gap-3 flex-wrap",children:K.images.map((e,r)=>(0,t.jsxs)("div",{className:"relative group w-20 h-20",children:[(0,t.jsx)(s.default,{src:e,alt:"",fill:!0,className:"object-cover rounded-lg border border-white/[0.1]",sizes:"80px"}),(0,t.jsx)("button",{onClick:()=>{V(e=>({...e,images:e.images.filter((e,t)=>t!==r)}))},className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 rounded-full text-white text-xs flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:"✕"})]},r))}),(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/[0.06]",children:[(0,t.jsx)("p",{className:"text-white/20 text-xs mb-2",children:"Or paste URL:"}),(0,t.jsx)("input",{type:"text",value:K.imageUrl,onChange:e=>V({...K,imageUrl:e.target.value}),className:"input-premium w-full bg-black/50 border border-white/[0.1] rounded-xl px-4 py-3 focus:outline-none"})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-4 mt-8",children:[(0,t.jsx)("button",{onClick:()=>{w(!1),j("")},disabled:v,className:"flex-1 py-3 border border-white/[0.1] rounded-xl hover:bg-white/[0.03] transition-colors disabled:opacity-50",children:"Cancel"}),(0,t.jsx)("button",{onClick:en,disabled:v,className:"btn-premium flex-1 py-3 bg-white text-black rounded-xl hover:bg-white/90 transition-colors font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-black/30 border-t-black rounded-full animate-spin"}),"Adding..."]}):"Add Product"})]})]})})]})}e.s(["default",()=>n])}]);
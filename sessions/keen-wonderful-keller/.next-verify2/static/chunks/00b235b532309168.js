(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,80613,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(36180);var l=e.i(98925),r=e.i(53699);function c(){let[e,c]=(0,s.useState)([]),[a,i]=(0,s.useState)(!0),[d,n]=(0,s.useState)(!1),[x,h]=(0,s.useState)(!1),[o,m]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{try{let e=await (0,l.getDocs)((0,l.query)((0,l.collection)(r.db,"inventory_logs"),(0,l.orderBy)("created_at","desc"),(0,l.limit)(100))),t=e.docs.map(e=>({id:e.id,...e.data()}));c(t),e.docs.length>0&&m(e.docs[e.docs.length-1]),h(100===e.docs.length),i(!1)}catch(e){console.error("Error fetching inventory logs:",e),i(!1)}})()},[]);let p=async()=>{if(o&&!d){n(!0);try{let e=await (0,l.getDocs)((0,l.query)((0,l.collection)(r.db,"inventory_logs"),(0,l.orderBy)("created_at","desc"),(0,l.startAfter)(o),(0,l.limit)(100))),t=e.docs.map(e=>({id:e.id,...e.data()}));c(e=>[...e,...t]),e.docs.length>0&&m(e.docs[e.docs.length-1]),h(100===e.docs.length)}catch(e){console.error("Error loading more logs:",e)}finally{n(!1)}}};return a?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"text-white",children:"Loading inventory logs..."})}):(0,t.jsx)("div",{className:"min-h-screen bg-black p-6",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-4xl font-bebas text-white mb-8",children:"Inventory Audit Trail"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,t.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-2xl p-6",children:[(0,t.jsx)("p",{className:"text-white/[0.6] text-sm mb-2",children:"Total Changes"}),(0,t.jsx)("p",{className:"text-4xl font-bebas text-white",children:e.length})]}),(0,t.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-2xl p-6",children:[(0,t.jsx)("p",{className:"text-white/[0.6] text-sm mb-2",children:"Total Restocks"}),(0,t.jsx)("p",{className:"text-4xl font-bebas text-white",children:e.filter(e=>e.change>0).length})]}),(0,t.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-2xl p-6",children:[(0,t.jsx)("p",{className:"text-white/[0.6] text-sm mb-2",children:"Total Sold/Removed"}),(0,t.jsx)("p",{className:"text-4xl font-bebas text-white",children:e.filter(e=>e.change<0).length})]})]}),(0,t.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-2xl p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bebas text-white mb-6",children:"Change History"}),0===e.length?(0,t.jsx)("p",{className:"text-white/[0.6] text-center py-8",children:"No inventory changes yet."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-white text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-white/[0.08]",children:[(0,t.jsx)("th",{className:"text-left py-3 px-4 text-white/[0.6]",children:"Date"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 text-white/[0.6]",children:"Product"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 text-white/[0.6]",children:"Size"}),(0,t.jsx)("th",{className:"text-center py-3 px-4 text-white/[0.6]",children:"Old Stock"}),(0,t.jsx)("th",{className:"text-center py-3 px-4 text-white/[0.6]",children:"New Stock"}),(0,t.jsx)("th",{className:"text-center py-3 px-4 text-white/[0.6]",children:"Change"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 text-white/[0.6]",children:"Reason"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 text-white/[0.6]",children:"User"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>{var s;return(0,t.jsxs)("tr",{className:"border-b border-white/[0.08] hover:bg-white/[0.02]",children:[(0,t.jsx)("td",{className:"py-4 px-4 text-white/[0.7]",children:new Date(e.created_at).toLocaleString()}),(0,t.jsx)("td",{className:"py-4 px-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-white",children:e.product_name}),(0,t.jsxs)("p",{className:"text-white/[0.5] text-xs flex items-center gap-1",children:[e.color&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color}})}),e.color]})]})}),(0,t.jsx)("td",{className:"py-4 px-4",children:e.size}),(0,t.jsx)("td",{className:"py-4 px-4 text-center",children:e.old_stock}),(0,t.jsx)("td",{className:"py-4 px-4 text-center",children:e.new_stock}),(0,t.jsxs)("td",{className:`py-4 px-4 text-center font-medium ${(s=e.change)>0?"text-green-400":s<0?"text-red-400":"text-white"}`,children:[e.change>0?"+":"",e.change]}),(0,t.jsx)("td",{className:"py-4 px-4 text-white/[0.7]",children:e.reason}),(0,t.jsx)("td",{className:"py-4 px-4 text-white/[0.6]",children:e.user})]},e.id)})})]})}),(0,t.jsxs)("div",{className:"mt-6 flex flex-col items-center gap-4",children:[(0,t.jsxs)("p",{className:"text-white/[0.6] text-sm",children:["Showing ",e.length," logs"]}),x&&(0,t.jsx)("button",{onClick:p,disabled:d,className:"px-6 py-2 bg-white/[0.08] border border-white/[0.2] rounded-lg text-white hover:bg-white/[0.12] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?"Loading...":"Load More"})]})]})]})]})})}e.s(["default",()=>c])}]);
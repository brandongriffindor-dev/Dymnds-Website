(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94008,e=>{"use strict";e.i(36180);var t=e.i(98925),s=e.i(53699);e.i(47167);let r=new Set(["email","customer_email","customerEmail","phone","password","token","idToken","creditCard","ssn"]);function a(e,t,s,a){let i={level:e,message:t,timestamp:new Date().toISOString()};return s&&Object.keys(s).length>0&&(i.context=function e(t){let s={...t};for(let[t,a]of Object.entries(s))"string"==typeof a&&r.has(t)?s[t]=a.length>3?a.slice(0,3)+"***":"***":"object"!=typeof a||null===a||Array.isArray(a)||(s[t]=e(a));return s}(s)),a instanceof Error?i.error={name:a.name,message:a.message,stack:a.stack}:a&&(i.error={name:"UnknownError",message:String(a)}),i}function i(e){let t=JSON.stringify(e);"error"===e.level||"warn"===e.level?console.error(t):console.log(t)}let l={debug(e,t){},info(e,t){i(a("info",e,t))},warn(e,t,s){i(a("warn",e,t,s))},error(e,t,s){i(a("error",e,t,s))}};function n(e,r,a){(0,t.addDoc)((0,t.collection)(s.db,"admin_audit_log"),{action:e,details:r,admin_email:a||"unknown",timestamp:(0,t.serverTimestamp)(),created_at:new Date().toISOString()}).catch(t=>{l.error("Audit log write failed",{action:e},t)})}e.s(["logAdminAction",()=>n],94008)},39896,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(53699);e.i(36180);var a=e.i(98925),i=e.i(94008);let l={general:"General Inquiry",order:"Order Support",returns:"Returns & Exchanges",partnership:"Partnership",press:"Press & Media",other:"Other"};function n(e){if(!e)return"—";try{return new Date(e).toLocaleDateString("en-CA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"—"}}function d(){let e=()=>{let e=(0,r.getAuthClient)();return e?.currentUser?.email||"unknown"},[d,c]=(0,s.useState)([]),[o,m]=(0,s.useState)(!0),[x,h]=(0,s.useState)(null),[b,p]=(0,s.useState)(""),[u,g]=(0,s.useState)("all"),[w,j]=(0,s.useState)(new Set),[f,N]=(0,s.useState)(null),[v,y]=(0,s.useState)(!1),[k,S]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{try{let e=(0,a.query)((0,a.collection)(r.db,"contact_messages"),(0,a.orderBy)("timestamp","desc")),t=(await (0,a.getDocs)(e)).docs.map(e=>{let t=e.data(),s="";return t.timestamp instanceof a.Timestamp?s=t.timestamp.toDate().toISOString():t.timestamp&&(s=String(t.timestamp)),{id:e.id,name:t.name||"",email:t.email||"",subject:t.subject||"general",message:t.message||"",timestamp:s,status:t.status||"new",read:!0===t.read}});c(t)}catch(e){console.error("Error fetching contact messages:",e)}m(!1)})()},[]);let C=(0,s.useMemo)(()=>{let e=d;if("unread"===u&&(e=e.filter(e=>!e.read)),"read"===u&&(e=e.filter(e=>e.read)),b.trim()){let t=b.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.subject.toLowerCase().includes(t)||e.message.toLowerCase().includes(t))}return e},[d,u,b]),D=d.length,$=d.filter(e=>!e.read).length,_=async e=>{S(!0);try{let t=!e.read;await (0,a.updateDoc)((0,a.doc)(r.db,"contact_messages",e.id),{read:t}),c(s=>s.map(s=>s.id===e.id?{...s,read:t}:s))}catch(e){console.error("Error toggling read status:",e)}S(!1)},A=async t=>{S(!0);try{await (0,a.deleteDoc)((0,a.doc)(r.db,"contact_messages",t)),(0,i.logAdminAction)("message_deleted",{messageId:t},e()),c(e=>e.filter(e=>e.id!==t)),x===t&&h(null)}catch(e){console.error("Error deleting message:",e)}N(null),S(!1)},E=async()=>{S(!0);try{let e=(0,a.writeBatch)(r.db);d.filter(e=>!e.read).forEach(t=>{e.update((0,a.doc)(r.db,"contact_messages",t.id),{read:!0})}),await e.commit(),c(e=>e.map(e=>({...e,read:!0})))}catch(e){console.error("Error marking all as read:",e)}S(!1)},M=async()=>{S(!0);try{let t=(0,a.writeBatch)(r.db);w.forEach(e=>{t.delete((0,a.doc)(r.db,"contact_messages",e))}),await t.commit(),(0,i.logAdminAction)("bulk_delete",{type:"messages",count:w.size},e()),c(e=>e.filter(e=>!w.has(e.id))),j(new Set),x&&w.has(x)&&h(null)}catch(e){console.error("Error bulk deleting messages:",e)}y(!1),S(!1)};return o?(0,t.jsx)("div",{className:"flex items-center justify-center py-32",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-10 h-10 border-2 border-white/20 border-t-white rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-white/30 text-sm tracking-wider",children:"Loading messages..."})]})}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-4xl font-bebas tracking-wider",children:"MESSAGES"}),(0,t.jsxs)("p",{className:"text-white/25 text-sm mt-1",children:["Contact form submissions · ",D," total · ",$," unread"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[$>0&&(0,t.jsx)("button",{onClick:E,disabled:k,className:"btn-premium px-4 py-2 bg-white/[0.06] border border-white/[0.1] rounded-xl text-xs tracking-wider uppercase hover:bg-white/[0.1] transition-colors disabled:opacity-50",children:"Mark All Read"}),w.size>0&&(0,t.jsxs)("button",{onClick:()=>y(!0),disabled:k,className:"btn-premium px-4 py-2 bg-red-500/10 border border-red-500/20 rounded-xl text-xs tracking-wider uppercase text-red-400 hover:bg-red-500/20 transition-colors disabled:opacity-50",children:["Delete (",w.size,")"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"p-4 bg-white/[0.02] border border-white/[0.06] rounded-2xl",children:[(0,t.jsx)("p",{className:"text-white/30 text-[10px] uppercase tracking-widest mb-1",children:"Total"}),(0,t.jsx)("p",{className:"text-2xl font-bebas",children:D})]}),(0,t.jsxs)("div",{className:"p-4 bg-white/[0.02] border border-white/[0.06] rounded-2xl",children:[(0,t.jsx)("p",{className:"text-white/30 text-[10px] uppercase tracking-widest mb-1",children:"Unread"}),(0,t.jsx)("p",{className:`text-2xl font-bebas ${$>0?"text-amber-400":""}`,children:$})]}),(0,t.jsxs)("div",{className:"p-4 bg-white/[0.02] border border-white/[0.06] rounded-2xl hidden sm:block",children:[(0,t.jsx)("p",{className:"text-white/30 text-[10px] uppercase tracking-widest mb-1",children:"Read"}),(0,t.jsx)("p",{className:"text-2xl font-bebas text-white/40",children:D-$})]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/20",children:"⌕"}),(0,t.jsx)("input",{type:"text",value:b,onChange:e=>p(e.target.value),placeholder:"Search by name, email, or message...",className:"input-premium w-full pl-10 pr-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-sm focus:outline-none placeholder:text-white/20"})]}),(0,t.jsx)("div",{className:"flex gap-2",children:["all","unread","read"].map(e=>(0,t.jsxs)("button",{onClick:()=>g(e),className:`px-4 py-3 rounded-xl text-xs tracking-wider uppercase transition-all ${u===e?"bg-white text-black font-medium":"bg-white/[0.03] border border-white/[0.08] text-white/40 hover:text-white/60 hover:bg-white/[0.06]"}`,children:[e,"unread"===e&&$>0&&(0,t.jsx)("span",{className:`ml-1.5 px-1.5 py-0.5 rounded-full text-[10px] ${u===e?"bg-black/20 text-black":"bg-amber-500/80 text-white"}`,children:$})]},e))})]}),0===C.length?(0,t.jsxs)("div",{className:"text-center py-20 bg-white/[0.02] border border-white/[0.06] rounded-2xl",children:[(0,t.jsx)("span",{className:"text-4xl block mb-4 opacity-20",children:"✉"}),(0,t.jsx)("h3",{className:"text-xl font-bebas tracking-wider mb-2",children:b||"all"!==u?"No Messages Found":"No Messages Yet"}),(0,t.jsx)("p",{className:"text-white/25 text-sm",children:b?"Try adjusting your search or filter":"Contact form submissions will appear here"})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 px-4 py-2",children:[(0,t.jsx)("button",{onClick:()=>{w.size===C.length?j(new Set):j(new Set(C.map(e=>e.id)))},className:`w-5 h-5 rounded border transition-colors flex items-center justify-center ${w.size===C.length&&C.length>0?"bg-white border-white text-black":"border-white/20 hover:border-white/40"}`,children:w.size===C.length&&C.length>0&&(0,t.jsx)("span",{className:"text-xs",children:"✓"})}),(0,t.jsx)("span",{className:"text-white/20 text-xs tracking-wider uppercase",children:w.size>0?`${w.size} selected`:`${C.length} message${1!==C.length?"s":""}`})]}),C.map(e=>{let s=x===e.id,i=w.has(e.id);return(0,t.jsxs)("div",{className:`border rounded-2xl transition-all duration-200 overflow-hidden ${!e.read?"bg-white/[0.04] border-white/[0.12]":"bg-white/[0.01] border-white/[0.06]"} ${i?"ring-1 ring-white/20":""}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 px-4 py-4 cursor-pointer hover:bg-white/[0.03] transition-colors",onClick:()=>{h(s?null:e.id),s||e.read||((0,a.updateDoc)((0,a.doc)(r.db,"contact_messages",e.id),{read:!0}).catch(()=>{}),c(t=>t.map(t=>t.id===e.id?{...t,read:!0}:t)))},children:[(0,t.jsx)("button",{onClick:t=>{var s;t.stopPropagation(),s=e.id,j(e=>{let t=new Set(e);return t.has(s)?t.delete(s):t.add(s),t})},className:`w-5 h-5 rounded border transition-colors flex-shrink-0 flex items-center justify-center ${i?"bg-white border-white text-black":"border-white/20 hover:border-white/40"}`,children:i&&(0,t.jsx)("span",{className:"text-xs",children:"✓"})}),(0,t.jsx)("div",{className:"w-2 flex-shrink-0",children:!e.read&&(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-amber-400"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("p",{className:`text-sm truncate ${!e.read?"font-semibold text-white":"text-white/70"}`,children:e.name}),(0,t.jsx)("span",{className:"text-white/15 text-xs hidden sm:inline",children:"·"}),(0,t.jsx)("p",{className:"text-xs text-white/30 truncate hidden sm:block",children:e.email})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,t.jsx)("span",{className:`text-xs px-2 py-0.5 rounded-full ${!e.read?"bg-white/10 text-white/60":"bg-white/[0.04] text-white/25"}`,children:l[e.subject]||e.subject}),(0,t.jsx)("p",{className:"text-xs text-white/20 truncate hidden md:block",children:e.message.length>60?e.message.slice(0,60)+"...":e.message})]})]}),(0,t.jsx)("p",{className:"text-xs text-white/20 flex-shrink-0 hidden sm:block",children:function(e){if(!e)return"";try{let t=Date.now()-new Date(e).getTime(),s=Math.floor(t/6e4);if(s<1)return"Just now";if(s<60)return`${s}m ago`;let r=Math.floor(s/60);if(r<24)return`${r}h ago`;let a=Math.floor(r/24);if(a<7)return`${a}d ago`;return n(e)}catch{return""}}(e.timestamp)}),(0,t.jsx)("span",{className:`text-white/20 flex-shrink-0 transition-transform duration-200 ${s?"rotate-180":""}`,children:"▾"})]}),s&&(0,t.jsxs)("div",{className:"px-4 pb-5 pt-1 border-t border-white/[0.06]",children:[(0,t.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4 mb-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[10px] uppercase tracking-widest text-white/25 mb-1",children:"From"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-white/40",children:e.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[10px] uppercase tracking-widest text-white/25 mb-1",children:"Received"}),(0,t.jsx)("p",{className:"text-sm text-white/60",children:n(e.timestamp)})]})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsx)("p",{className:"text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Subject"}),(0,t.jsx)("p",{className:"text-sm text-white/70",children:l[e.subject]||e.subject})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("p",{className:"text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Message"}),(0,t.jsx)("div",{className:"p-4 bg-white/[0.02] border border-white/[0.06] rounded-xl",children:(0,t.jsx)("p",{className:"text-sm text-white/70 whitespace-pre-wrap leading-relaxed",children:e.message})})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,t.jsx)("a",{href:`mailto:${e.email}?subject=Re: ${encodeURIComponent(l[e.subject]||e.subject)} — DYMNDS`,className:"btn-premium px-5 py-2.5 bg-white text-black text-xs tracking-wider uppercase rounded-xl hover:bg-white/90 transition-colors",children:"Reply"}),(0,t.jsxs)("button",{onClick:()=>_(e),disabled:k,className:"btn-premium px-5 py-2.5 bg-white/[0.06] border border-white/[0.1] text-xs tracking-wider uppercase rounded-xl hover:bg-white/[0.1] transition-colors disabled:opacity-50",children:["Mark as ",e.read?"Unread":"Read"]}),(0,t.jsx)("button",{onClick:()=>N(e.id),disabled:k,className:"btn-premium px-5 py-2.5 bg-red-500/10 border border-red-500/20 text-red-400 text-xs tracking-wider uppercase rounded-xl hover:bg-red-500/20 transition-colors disabled:opacity-50",children:"Delete"})]})]})]},e.id)})]}),f&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"modal-panel bg-neutral-950 border border-white/[0.08] rounded-2xl w-full max-w-md p-6",children:[(0,t.jsx)("h3",{className:"text-xl font-bebas tracking-wider mb-2",children:"Delete Message?"}),(0,t.jsx)("p",{className:"text-white/40 text-sm mb-6",children:"This will permanently delete this message. This action cannot be undone."}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>N(null),className:"flex-1 px-4 py-3 bg-white/[0.06] border border-white/[0.1] rounded-xl text-sm hover:bg-white/[0.1] transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>A(f),disabled:k,className:"flex-1 px-4 py-3 bg-red-500/20 border border-red-500/30 text-red-400 rounded-xl text-sm hover:bg-red-500/30 transition-colors disabled:opacity-50",children:"Delete"})]})]})}),v&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"modal-panel bg-neutral-950 border border-white/[0.08] rounded-2xl w-full max-w-md p-6",children:[(0,t.jsxs)("h3",{className:"text-xl font-bebas tracking-wider mb-2",children:["Delete ",w.size," Messages?"]}),(0,t.jsx)("p",{className:"text-white/40 text-sm mb-6",children:"This will permanently delete all selected messages. This action cannot be undone."}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>y(!1),className:"flex-1 px-4 py-3 bg-white/[0.06] border border-white/[0.1] rounded-xl text-sm hover:bg-white/[0.1] transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:M,disabled:k,className:"flex-1 px-4 py-3 bg-red-500/20 border border-red-500/30 text-red-400 rounded-xl text-sm hover:bg-red-500/30 transition-colors disabled:opacity-50",children:"Delete All"})]})]})})]})}e.s(["default",()=>d])}]);
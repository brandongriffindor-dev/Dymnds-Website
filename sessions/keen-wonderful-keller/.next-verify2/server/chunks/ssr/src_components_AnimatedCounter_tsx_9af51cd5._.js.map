{"version":3,"sources":["../../../../../../src/components/AnimatedCounter.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef, useState, useCallback } from 'react';\n\ninterface AnimatedCounterProps {\n  end: number;\n  prefix?: string;\n  suffix?: string;\n  duration?: number;\n  className?: string;\n}\n\nexport default function AnimatedCounter({\n  end,\n  prefix = '',\n  suffix = '',\n  duration = 1500,\n  className = '',\n}: AnimatedCounterProps) {\n  const ref = useRef<HTMLSpanElement>(null);\n  const [current, setCurrent] = useState(0);\n  const [hasStarted, setHasStarted] = useState(false);\n  const [prefersReducedMotion, setPrefersReducedMotion] = useState(false);\n\n  useEffect(() => {\n    const mq = window.matchMedia('(prefers-reduced-motion: reduce)');\n    // eslint-disable-next-line react-hooks/set-state-in-effect\n    setPrefersReducedMotion(mq.matches);\n\n    const handler = (e: MediaQueryListEvent) => setPrefersReducedMotion(e.matches);\n    mq.addEventListener('change', handler);\n    return () => mq.removeEventListener('change', handler);\n  }, []);\n\n  useEffect(() => {\n    if (prefersReducedMotion) {\n      // eslint-disable-next-line react-hooks/set-state-in-effect\n      setCurrent(end);\n       \n      setHasStarted(true);\n      return;\n    }\n\n    const el = ref.current;\n    if (!el) return;\n\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting && !hasStarted) {\n          setHasStarted(true);\n          observer.unobserve(el);\n        }\n      },\n      { threshold: 0.3 }\n    );\n\n    observer.observe(el);\n    return () => observer.disconnect();\n  }, [hasStarted, end, prefersReducedMotion]);\n\n  const animate = useCallback(() => {\n    if (!hasStarted || prefersReducedMotion) return;\n\n    const startTime = performance.now();\n\n    const step = (timestamp: number) => {\n      const elapsed = timestamp - startTime;\n      const progress = Math.min(elapsed / duration, 1);\n\n      // Ease-out: fast start, slow finish\n      const eased = 1 - Math.pow(1 - progress, 3);\n      const value = Math.round(eased * end);\n\n      setCurrent(value);\n\n      if (progress < 1) {\n        requestAnimationFrame(step);\n      }\n    };\n\n    requestAnimationFrame(step);\n  }, [hasStarted, end, duration, prefersReducedMotion]);\n\n  useEffect(() => {\n    animate();\n  }, [animate]);\n\n  return (\n    <span ref={ref} className={className}>\n      {prefix}{current}{suffix}\n    </span>\n  );\n}\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OAUe,SAAS,EAAgB,KACtC,CAAG,QACH,EAAS,EAAE,QACX,EAAS,EAAE,UACX,EAAW,IAAI,WACf,EAAY,EAAE,CACO,EACrB,IAAM,EAAM,CAAA,EAAA,EAAA,MAAA,AAAM,EAAkB,MAC9B,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,GACjC,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACvC,CAAC,EAAsB,EAAwB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAEjE,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IAAM,EAAK,OAAO,UAAU,CAAC,oCAE7B,EAAwB,EAAG,OAAO,EAElC,IAAM,EAAU,AAAC,GAA2B,EAAwB,EAAE,OAAO,EAE7E,OADA,EAAG,gBAAgB,CAAC,SAAU,GACvB,IAAM,EAAG,mBAAmB,CAAC,SAAU,EAChD,EAAG,EAAE,EAEL,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GAAI,EAAsB,CAExB,EAAW,GAEX,GAAc,GACd,MACF,CAEA,IAAM,EAAK,EAAI,OAAO,CACtB,GAAI,CAAC,EAAI,OAET,IAAM,EAAW,IAAI,qBACnB,CAAC,CAAC,EAAM,IACF,EAAM,cAAc,EAAI,CAAC,IAC3B,GAAc,GACd,EAAS,AAF8B,SAErB,CAAC,GAEvB,EACA,CAAE,UAAW,EAAI,GAInB,OADA,EAAS,OAAO,CAAC,GACV,IAAM,EAAS,UAAU,EAClC,EAAG,CAAC,EAAY,EAAK,EAAqB,EAE1C,IAAM,EAAU,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,KAC1B,GAAI,CAAC,GAAc,EAAsB,OAEzC,IAAM,EAAY,YAAY,GAAG,GAE3B,EAAO,AAAC,IAEZ,IAAM,EAAW,KAAK,GAAG,CADT,AACU,GADE,CAAA,EACQ,EAAU,GAM9C,EAFc,KAAK,IAER,CAFa,CAAC,CADX,EAAI,KAAK,GAAG,CAAC,EAAI,EAAU,EAAA,EACR,IAI7B,EAAW,GAAG,AAChB,sBAAsB,EAE1B,EAEA,sBAAsB,EACxB,EAAG,CAAC,EAAY,EAAK,EAAU,EAAqB,EAMpD,MAJA,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,KACR,GACF,EAAG,CAAC,EAAQ,EAGV,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,IAAK,EAAK,UAAW,YACxB,EAAQ,EAAS,IAGxB"}
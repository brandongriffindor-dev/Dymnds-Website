module.exports=[88615,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944),f=a.i(79353);a.i(69387);var g=a.i(60574);a.i(30485);var h=a.i(31052),i=a.i(70106);let j=(0,i.default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),k=(0,i.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);function l({user:a,onComplete:d,onSkip:e}){let[f,g]=(0,c.useState)("intro"),[i,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(!1),u=(0,c.useRef)(null),v=async()=>{t(!0),r("");try{let b=await (0,h.multiFactor)(a).getSession(),c=await h.TotpMultiFactorGenerator.generateSecret(b);u.current=c,l(c.secretKey),n(c.generateQrCodeUrl(a.email||"admin","DYMNDS Admin")),g("qr")}catch(a){r(a instanceof Error?a.message:"Failed to start 2FA setup")}finally{t(!1)}},w=async()=>{t(!0),r("");try{if(!u.current){r("Setup session expired. Please start over."),g("intro");return}let b=h.TotpMultiFactorGenerator.assertionForEnrollment(u.current,o);await (0,h.multiFactor)(a).enroll(b,"Authenticator App"),d()}catch(a){r(a instanceof Error?a.message:"Invalid code. Please try again.")}finally{t(!1)}};return(0,b.jsxs)("div",{className:"max-w-md mx-auto p-8 bg-neutral-900 border border-white/10 rounded-2xl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)(j,{className:"w-6 h-6 text-green-400"}),(0,b.jsx)("h2",{className:"text-xl font-bebas tracking-wider",children:"Two-Factor Authentication"})]}),"intro"===f&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("p",{className:"text-white/60 text-sm leading-relaxed",children:"Protect your admin account with an authenticator app. This adds an extra layer of security beyond your password."}),(0,b.jsx)("button",{onClick:v,disabled:s,className:"w-full py-3 bg-white text-black font-bold tracking-wider uppercase rounded-lg disabled:opacity-50",children:s?"Setting up...":"Set Up 2FA"}),(0,b.jsx)("button",{onClick:e,className:"w-full py-2 text-xs text-white/40 hover:text-white/60 transition-colors",children:"Skip for now"})]}),"qr"===f&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("p",{className:"text-white/60 text-sm",children:"Add this key to your authenticator app (Google Authenticator, Authy, Microsoft Authenticator, etc.):"}),m&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"p-4 bg-white/5 border border-white/10 rounded-lg text-center",children:[(0,b.jsx)("p",{className:"text-[10px] tracking-widest uppercase text-white/40 mb-2",children:"Authenticator URL"}),(0,b.jsx)("p",{className:"text-xs text-white/60 break-all font-mono select-all",children:m}),(0,b.jsxs)("button",{onClick:()=>navigator.clipboard.writeText(m),className:"mt-2 text-xs text-white/40 hover:text-white flex items-center gap-1 mx-auto",children:[(0,b.jsx)(k,{className:"w-3 h-3"})," Copy URL"]})]}),(0,b.jsx)("p",{className:"text-white/40 text-xs text-center",children:"Paste this URL into your authenticator app, or use the manual key below"})]}),(0,b.jsxs)("div",{className:"p-3 bg-white/5 rounded-lg",children:[(0,b.jsx)("p",{className:"text-[10px] tracking-widest uppercase text-white/40 mb-1",children:"Manual Entry Key"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("code",{className:"text-sm text-white/80 font-mono break-all",children:i}),(0,b.jsx)("button",{onClick:()=>navigator.clipboard.writeText(i),className:"text-white/40 hover:text-white",children:(0,b.jsx)(k,{className:"w-4 h-4"})})]})]}),(0,b.jsx)("button",{onClick:()=>g("verify"),className:"w-full py-3 bg-white text-black font-bold tracking-wider uppercase rounded-lg",children:"I've Added It"})]}),"verify"===f&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("p",{className:"text-white/60 text-sm",children:"Enter the 6-digit code from your authenticator app:"}),(0,b.jsx)("input",{type:"text",value:o,onChange:a=>p(a.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",className:"w-full bg-black border border-white/20 rounded-lg px-4 py-3 text-white text-center text-2xl tracking-[0.5em] font-mono focus:outline-none focus:border-white/40",maxLength:6,autoFocus:!0}),(0,b.jsx)("button",{onClick:w,disabled:6!==o.length||s,className:"w-full py-3 bg-white text-black font-bold tracking-wider uppercase rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Verifying...":"Verify & Enable 2FA"})]}),q&&(0,b.jsx)("div",{className:"mt-4 p-3 bg-red-500/10 border border-red-500/20 text-red-400 text-sm rounded",children:q})]})}function m({error:a,onSuccess:d,onCancel:e}){let[g,i]=(0,c.useState)(""),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(""),o=async()=>{l(!0),n("");try{let b=(0,f.getAuthClient)();if(!b)throw Error("Auth not initialized");let c=(0,h.getMultiFactorResolver)(b,a),e=c.hints.find(a=>a.factorId===h.TotpMultiFactorGenerator.FACTOR_ID);if(!e)return void n("No TOTP factor found");let i=h.TotpMultiFactorGenerator.assertionForSignIn(e.uid,g);await c.resolveSignIn(i),d()}catch(a){n(a instanceof Error?a.message:"Invalid code")}finally{l(!1)}};return(0,b.jsxs)("div",{className:"max-w-md mx-auto p-8 bg-neutral-900 border border-white/10 rounded-2xl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)(j,{className:"w-6 h-6 text-green-400"}),(0,b.jsx)("h2",{className:"text-xl font-bebas tracking-wider",children:"Enter Verification Code"})]}),(0,b.jsx)("p",{className:"text-white/60 text-sm mb-4",children:"Enter the 6-digit code from your authenticator app."}),(0,b.jsx)("input",{type:"text",value:g,onChange:a=>i(a.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",className:"w-full bg-black border border-white/20 rounded-lg px-4 py-3 text-white text-center text-2xl tracking-[0.5em] font-mono focus:outline-none focus:border-white/40 mb-4",maxLength:6,autoFocus:!0,onKeyDown:a=>"Enter"===a.key&&6===g.length&&o()}),(0,b.jsx)("button",{onClick:o,disabled:6!==g.length||k,className:"w-full py-3 bg-white text-black font-bold tracking-wider uppercase rounded-lg disabled:opacity-50",children:k?"Verifying...":"Verify"}),(0,b.jsx)("button",{onClick:e,className:"w-full mt-3 py-2 text-xs text-white/40 hover:text-white/60 transition-colors",children:"Cancel"}),m&&(0,b.jsx)("div",{className:"mt-4 p-3 bg-red-500/10 border border-red-500/20 text-red-400 text-sm rounded",children:m})]})}let n=[{label:"Dashboard",href:"/admin",icon:"◆"},{label:"Products",href:"/admin/products",icon:"▦"},{label:"Orders",href:"/admin/orders",icon:"⬡"},{label:"Customers",href:"/admin/customers",icon:"◉"},{label:"Analytics",href:"/admin/analytics",icon:"◈"},{label:"Discounts",href:"/admin/discounts",icon:"◇"},{label:"Expenses",href:"/admin/expenses",icon:"▣"},{label:"Alerts",href:"/admin/alerts",icon:"⚠"},{label:"Inventory",href:"/admin/inventory",icon:"▤"},{label:"Waitlist",href:"/admin/waitlist",icon:"◎"},{label:"Messages",href:"/admin/messages",icon:"✉"}];function o({children:a}){let i,j=(0,e.usePathname)(),k=(0,e.useRouter)(),o=function(){let[a,b]=(0,c.useState)(null),[d,e]=(0,c.useState)(!0),[g,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(0),[B,C]=(0,c.useState)(0);(0,c.useEffect)(()=>{let a=(0,f.getAuthClient)();if(!a)return;let c=(0,h.onAuthStateChanged)(a,a=>{b(a),e(!1)});return()=>c()},[]),(0,c.useEffect)(()=>{let a=(0,f.getAuthClient)();if(!a)return;let b=(0,h.onIdTokenChanged)(a,async a=>{if(a){let b=await a.getIdToken(),c=document.cookie.split("; ").find(a=>a.startsWith("csrf_token="))?.split("=")[1]||"";await fetch("/api/auth/session",{method:"POST",headers:{"Content-Type":"application/json",...c&&{"X-CSRF-Token":c}},body:JSON.stringify({idToken:b})}).catch(()=>{})}}),c=setInterval(async()=>{a.currentUser&&await a.currentUser.getIdToken(!0)},33e5);return()=>{b(),clearInterval(c)}},[]);let D=async a=>{a.preventDefault(),m(""),o(!0);let b=Date.now();if(B>b){let a=Math.ceil((B-b)/1e3);m(`Too many attempts. Try again in ${a} seconds.`),o(!1);return}try{let a=(0,f.getAuthClient)();if(!a)throw Error("Auth not available");let b=await (0,h.signInWithEmailAndPassword)(a,g,j),c=b.user;if(!(c.multiFactor&&c.multiFactor.enrolledFactors?.length>0)){w(b.user),y(!0),u(!0);return}let d=await b.user.getIdToken(),e=document.cookie.split("; ").find(a=>a.startsWith("csrf_token="))?.split("=")[1]||"";await fetch("/api/auth/session",{method:"POST",headers:{"Content-Type":"application/json",...e&&{"X-CSRF-Token":e}},body:JSON.stringify({idToken:d})})}catch(d){let a=d?.code||"";if("auth/multi-factor-auth-required"===a){s(d),q(!0),o(!1);return}let b=d instanceof Error?d.message:"Login failed";m({"auth/user-not-found":"Invalid email or password","auth/wrong-password":"Invalid email or password","auth/invalid-email":"Invalid email or password","auth/invalid-credential":"Invalid email or password","auth/too-many-requests":"Too many failed attempts. Try again later"}[a]||b);let c=z+1;A(c),c>=5&&(C(Date.now()+12e4),A(0),m("Too many failed attempts. Account locked for 2 minutes."))}finally{o(!1)}};return{user:a,authLoading:d,email:g,password:j,loginError:l,loginLoading:n,showMFA:p,mfaError:r,show2FASetup:t,pendingMFAUser:v,mfaSetupPending:x,loginAttempts:z,lockoutUntil:B,setEmail:i,setPassword:k,handleLogin:D,handleLogout:async()=>{await fetch("/api/auth/session",{method:"DELETE"}).catch(()=>{});let a=(0,f.getAuthClient)();a&&await (0,h.signOut)(a)},setShowMFA:q,setMfaError:s,setShow2FASetup:u,setMfaSetupPending:y,setPendingMFAUser:w,setLoginError:m}}(),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(0),v=(0,c.useRef)(null),[w,x]=(0,c.useState)(0),[y,z]=(0,c.useState)(0),[A,B]=(0,c.useState)(0),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)([]),[I,J]=(0,c.useState)([]);(0,c.useEffect)(()=>{q(!1)},[j]),(0,c.useEffect)(()=>{let a=a=>{(a.metaKey||a.ctrlKey)&&"k"===a.key&&(a.preventDefault(),D(!0)),"Escape"===a.key&&D(!1)};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[]),(0,c.useEffect)(()=>{},[]),(0,c.useEffect)(()=>{if(!o.user)return;v.current=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBjGH0fPTgjMGHm7A7+OZSA0PVanu87plHQUuh9Dz2YU2Bhxqv+zplkcODVGm5O+4ZSAEMYrO89GFNwYdcfDr4plIDQtPp+XysWUeBjiOz/PShjYGHG7A7+SaSQ0PTqjl8bJkHwU2jc7zzYU1Bhxwv+zmm0gNC1Gn5fGzZSAFNo/M89CEMwYccPDs4plIDQtQp+TwxWUeBTiOz/PPhjUGG3Dw7OKbSA0LUqjl8cVlHwU3jM7z0YU1Bhtw8OzhmUgNC1Ko5fHFZSAFOI7O89CEMwYccPDs4ppIDQtQp+TwxWUeBTiOz/PPhjUGG3Dw7OKaSA0LUqjl8cVlIAU3jM7z0YU1Bxtw8OzhmUgNC1Ko5fHFZSAF");let a=(0,g.query)((0,g.collection)(f.db,"orders"),(0,g.orderBy)("created_at","desc")),b=(0,g.onSnapshot)(a,a=>{let b=a.docs.map(a=>({id:a.id,...a.data()}));if(t>0&&b.length>t){let a=b.length-t;v.current&&v.current.play().catch(()=>{}),r&&"Notification"in window&&new Notification("New Order!",{body:`${a} new order${a>1?"s":""} received`,icon:"/favicon.ico"})}x(b.filter(a=>"pending"===a.status).length),u(b.length)},a=>{console.error("Error listening to orders:",a)});return()=>b()},[o.user,r,t]),(0,c.useEffect)(()=>{o.user&&(async()=>{try{let a=(await (0,g.getDocs)((0,g.collection)(f.db,"products"))).docs.map(a=>({id:a.id,...a.data()})),b=["XS","S","M","L","XL","XXL"],c=0;a.forEach(a=>{let d=a.colors||[];d.length>0?d.forEach(a=>{b.forEach(b=>{5>(a.stock?.[b]||0)&&c++})}):b.forEach(b=>{5>(a.stock?.[b]||0)&&c++})}),z(c)}catch(a){console.error("Error fetching low stock:",a)}})()},[o.user]),(0,c.useEffect)(()=>{o.user&&(async()=>{try{let a=(await (0,g.getDocs)((0,g.collection)(f.db,"contact_messages"))).docs.filter(a=>!0!==a.data().read).length;B(a)}catch(a){console.error("Error fetching unread messages:",a)}})()},[o.user]),(0,c.useEffect)(()=>{C&&o.user&&(async()=>{try{let[a,b]=await Promise.all([(0,g.getDocs)((0,g.collection)(f.db,"products")),(0,g.getDocs)((0,g.query)((0,g.collection)(f.db,"orders"),(0,g.orderBy)("created_at","desc")))]);H(a.docs.map(a=>({id:a.id,...a.data()}))),J(b.docs.map(a=>({id:a.id,...a.data()})))}catch(a){console.error("Error fetching search data:",a)}})()},[C,o.user]);let K=async()=>{"Notification"in window&&"granted"===await Notification.requestPermission()&&s(!0)};return o.authLoading?(0,b.jsx)("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-12 h-12 border-2 border-white/20 border-t-white rounded-full animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-white/40 text-sm tracking-wider uppercase",children:"Initializing DYMNDS OS"})]})}):!o.user||o.mfaSetupPending?o.show2FASetup?(0,b.jsx)("div",{className:"min-h-screen bg-black text-white flex items-center justify-center px-4",children:(0,b.jsx)(l,{user:o.pendingMFAUser,onComplete:()=>{o.setMfaSetupPending(!1),o.setShow2FASetup(!1),o.setPendingMFAUser(null),k.push("/admin")},onSkip:async()=>{o.setMfaSetupPending(!1),o.setShow2FASetup(!1),o.setPendingMFAUser(null),await fetch("/api/auth/session",{method:"DELETE"}).catch(()=>{});let a=(0,f.getAuthClient)();a&&await (0,h.signOut)(a)}})}):o.showMFA&&o.mfaError?(0,b.jsx)("div",{className:"min-h-screen bg-black text-white flex items-center justify-center px-4",children:(0,b.jsx)(m,{error:o.mfaError,onSuccess:()=>{o.setShowMFA(!1),o.setMfaError(null);let a=(0,f.getAuthClient)();a?.currentUser&&a.currentUser.getIdToken().then(a=>{let b=document.cookie.split("; ").find(a=>a.startsWith("csrf_token="))?.split("=")[1]||"";fetch("/api/auth/session",{method:"POST",headers:{"Content-Type":"application/json",...b&&{"X-CSRF-Token":b}},body:JSON.stringify({idToken:a})}).catch(()=>{})})},onCancel:()=>{o.setShowMFA(!1),o.setMfaError(null),o.setLoginError("MFA verification cancelled")}})}):(0,b.jsx)("div",{className:"min-h-screen bg-black text-white flex items-center justify-center px-4",children:(0,b.jsxs)("div",{className:"w-full max-w-md",children:[(0,b.jsxs)("div",{className:"text-center mb-10",children:[(0,b.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 border border-white/10 rounded-2xl mb-6 bg-white/[0.03]",children:(0,b.jsx)("span",{className:"text-2xl",children:"◆"})}),(0,b.jsx)("h1",{className:"text-5xl font-bebas tracking-wider mb-2",children:"DYMNDS OS"}),(0,b.jsx)("p",{className:"text-white/30 text-sm tracking-widest uppercase",children:"Admin Access"})]}),(0,b.jsxs)("form",{onSubmit:o.handleLogin,className:"bg-white/[0.03] border border-white/[0.08] rounded-2xl p-8 space-y-6",children:[o.loginError&&(0,b.jsx)("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-xl text-red-400 text-sm",children:o.loginError}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"admin-email",className:"block text-xs uppercase tracking-widest text-white/30 mb-2",children:"Email"}),(0,b.jsx)("input",{id:"admin-email",type:"email",value:o.email,onChange:a=>o.setEmail(a.target.value),className:"input-premium w-full bg-black/50 border border-white/[0.12] rounded-xl px-4 py-3.5 text-white placeholder:text-white/20 focus:outline-none",placeholder:"admin@weardymnds.com",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"admin-password",className:"block text-xs uppercase tracking-widest text-white/30 mb-2",children:"Password"}),(0,b.jsx)("input",{id:"admin-password",type:"password",value:o.password,onChange:a=>o.setPassword(a.target.value),className:"input-premium w-full bg-black/50 border border-white/[0.12] rounded-xl px-4 py-3.5 text-white placeholder:text-white/20 focus:outline-none",placeholder:"••••••••",required:!0})]}),(0,b.jsx)("button",{type:"submit",disabled:o.loginLoading,className:"btn-premium w-full py-4 bg-white text-black font-bold tracking-wider uppercase rounded-xl hover:bg-white/90 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:o.loginLoading?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-black/30 border-t-black rounded-full animate-spin"}),"Authenticating..."]}):"Sign In"})]}),(0,b.jsx)("p",{className:"text-center text-white/15 text-xs mt-8 tracking-widest uppercase",children:"Pressure Creates Diamonds"})]})}):(0,b.jsxs)("div",{className:"min-h-screen bg-black text-white",children:[(0,b.jsxs)("header",{className:"lg:hidden fixed top-0 left-0 right-0 h-16 bg-neutral-950/95 backdrop-blur-xl border-b border-white/[0.06] z-50 flex items-center justify-between px-4",children:[(0,b.jsx)("h1",{className:"text-xl font-bebas tracking-wider",children:"DYMNDS OS"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("button",{onClick:()=>D(!0),className:"p-2 rounded-lg bg-white/[0.05] hover:bg-white/[0.1] transition-colors",title:"Search (⌘K)","aria-label":"Search products, orders, and customers",children:(0,b.jsx)("span",{className:"text-white/50",children:"⌕"})}),(0,b.jsx)("button",{onClick:()=>q(!p),className:"p-2 rounded-lg bg-white/[0.05] hover:bg-white/[0.1] transition-colors","aria-label":p?"Close admin menu":"Open admin menu","aria-expanded":p,children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p?(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),p&&(0,b.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-40",onClick:()=>q(!1)}),(0,b.jsxs)("aside",{className:`fixed left-0 top-0 h-full w-64 bg-neutral-950 border-r border-white/[0.06] z-50 transform transition-transform duration-300 ease-[cubic-bezier(0.16,1,0.3,1)] lg:translate-x-0 ${p?"translate-x-0":"-translate-x-full"}`,children:[(0,b.jsx)("div",{className:"p-6 border-b border-white/[0.06]",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-xl",children:"◆"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-bebas tracking-wider",children:"DYMNDS OS"}),(0,b.jsx)("p",{className:"text-white/25 text-[10px] tracking-widest uppercase",children:"Command Center"})]})]})}),(0,b.jsx)("div",{className:"px-4 pt-4",children:(0,b.jsxs)("button",{onClick:()=>{D(!0),q(!1)},className:"w-full flex items-center gap-3 px-3 py-2.5 bg-white/[0.03] border border-white/[0.06] rounded-xl text-white/30 text-sm hover:bg-white/[0.05] transition-colors",children:[(0,b.jsx)("span",{children:"⌕"}),(0,b.jsx)("span",{children:"Search..."}),(0,b.jsx)("span",{className:"ml-auto text-[10px] bg-white/[0.06] px-1.5 py-0.5 rounded",children:"⌘K"})]})}),(0,b.jsx)("nav",{"aria-label":"Admin navigation",className:"px-3 pt-4 space-y-1 overflow-y-auto",style:{maxHeight:"calc(100vh - 220px)"},children:n.map(a=>{var c;let e="/admin"===(c=a.href)?"/admin"===j:j.startsWith(c),f="Orders"===a.label&&w>0?w:"Alerts"===a.label&&y>0?y:"Messages"===a.label&&A>0?A:null;return(0,b.jsxs)(d.default,{href:a.href,onClick:()=>q(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl text-sm tracking-wider uppercase transition-all duration-200 ${e?"bg-white text-black font-medium":"text-white/40 hover:text-white/70 hover:bg-white/[0.04]"}`,children:[(0,b.jsx)("span",{className:`text-base ${e?"opacity-100":"opacity-40"}`,children:a.icon}),(0,b.jsx)("span",{className:"flex-1",children:a.label}),f&&(0,b.jsx)("span",{className:`px-2 py-0.5 text-xs rounded-full ${e?"bg-black/20 text-black":"bg-red-500/80 text-white"}`,children:f})]},a.href)})}),(0,b.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-white/[0.06] space-y-2",children:["Notification"in{}&&(0,b.jsxs)("button",{onClick:K,className:`w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-sm transition-all ${r?"text-green-400/70 bg-green-500/[0.05]":"text-white/30 hover:text-white/50 hover:bg-white/[0.03]"}`,children:[(0,b.jsx)("span",{children:r?"●":"○"}),(0,b.jsx)("span",{className:"tracking-wider uppercase text-xs",children:r?"Alerts On":"Enable Alerts"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 px-4 py-2.5",children:[(0,b.jsx)("div",{className:"w-7 h-7 rounded-full bg-white/[0.06] flex items-center justify-center text-xs text-white/40",children:"A"}),(0,b.jsx)("div",{className:"flex-1 min-w-0",children:(0,b.jsx)("p",{className:"text-xs text-white/30 truncate",children:o.user?.email})}),(0,b.jsx)("button",{onClick:o.handleLogout,className:"text-xs text-red-400/60 hover:text-red-400 transition-colors tracking-wider uppercase",children:"Exit"})]})]})]}),(0,b.jsx)("main",{className:"lg:ml-64 min-h-screen pt-20 lg:pt-0",children:(0,b.jsx)("div",{className:"p-4 lg:p-8",children:a})}),C&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-start justify-center pt-24 lg:pt-32 p-4",children:(0,b.jsxs)("div",{className:"modal-panel bg-neutral-950 border border-white/[0.08] rounded-2xl w-full max-w-2xl overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-4 border-b border-white/[0.06] flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-white/30",children:"⌕"}),(0,b.jsx)("input",{type:"text",autoFocus:!0,value:E,onChange:a=>F(a.target.value),placeholder:"Search products, orders, customers...",className:"flex-1 bg-transparent text-lg focus:outline-none text-white placeholder:text-white/20","aria-label":"Search products, orders, and customers"}),(0,b.jsx)("button",{onClick:()=>{D(!1),F("")},className:"px-2 py-1 bg-white/[0.06] rounded text-xs text-white/30 hover:bg-white/[0.1] transition-colors","aria-label":"Close search",children:"ESC"})]}),(0,b.jsx)("div",{className:"max-h-96 overflow-y-auto",children:E.length<2?(0,b.jsxs)("div",{className:"p-8 text-center text-white/30",children:[(0,b.jsx)("p",{className:"mb-2",children:"Start typing to search..."}),(0,b.jsx)("p",{className:"text-sm text-white/20",children:"Products, orders, customer emails"})]}):(0,b.jsxs)(b.Fragment,{children:[G.filter(a=>a.title?.toLowerCase().includes(E.toLowerCase())||a.slug?.toLowerCase().includes(E.toLowerCase())).length>0&&(0,b.jsxs)("div",{className:"p-2",children:[(0,b.jsx)("p",{className:"px-3 py-2 text-[10px] uppercase tracking-widest text-white/25",children:"Products"}),G.filter(a=>a.title?.toLowerCase().includes(E.toLowerCase())||a.slug?.toLowerCase().includes(E.toLowerCase())).slice(0,5).map(a=>(0,b.jsxs)("button",{onClick:()=>{D(!1),F(""),k.push("/admin/products")},className:"w-full text-left px-3 py-3 rounded-xl hover:bg-white/[0.04] flex items-center gap-3 transition-colors",children:[(0,b.jsx)("span",{className:"text-white/20",children:"▦"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-medium truncate",children:a.title}),(0,b.jsxs)("p",{className:"text-sm text-white/30",children:["$",a.price," · ",a.category]})]})]},a.id))]}),I.filter(a=>a.id?.toLowerCase().includes(E.toLowerCase())||a.customer_name?.toLowerCase().includes(E.toLowerCase())||a.customer_email?.toLowerCase().includes(E.toLowerCase())).length>0&&(0,b.jsxs)("div",{className:"p-2 border-t border-white/[0.04]",children:[(0,b.jsx)("p",{className:"px-3 py-2 text-[10px] uppercase tracking-widest text-white/25",children:"Orders"}),I.filter(a=>a.id?.toLowerCase().includes(E.toLowerCase())||a.customer_name?.toLowerCase().includes(E.toLowerCase())||a.customer_email?.toLowerCase().includes(E.toLowerCase())).slice(0,5).map(a=>(0,b.jsxs)("button",{onClick:()=>{D(!1),F(""),k.push("/admin/orders")},className:"w-full text-left px-3 py-3 rounded-xl hover:bg-white/[0.04] flex items-center gap-3 transition-colors",children:[(0,b.jsx)("span",{className:"text-white/20",children:"⬡"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("p",{className:"font-medium",children:["#",a.id.slice(-6).toUpperCase()]}),(0,b.jsxs)("p",{className:"text-sm text-white/30",children:[a.customer_name," · $",a.total_amount?.toFixed(2)]})]})]},a.id))]}),(i=Array.from(new Set(I.map(a=>a.customer_email))).filter(a=>a?.toLowerCase().includes(E.toLowerCase())||I.find(b=>b.customer_email===a)?.customer_name?.toLowerCase().includes(E.toLowerCase()))).length>0?(0,b.jsxs)("div",{className:"p-2 border-t border-white/[0.04]",children:[(0,b.jsx)("p",{className:"px-3 py-2 text-[10px] uppercase tracking-widest text-white/25",children:"Customers"}),i.slice(0,5).map(a=>{let c=I.find(b=>b.customer_email===a),d=I.filter(b=>b.customer_email===a).length;return(0,b.jsxs)("button",{onClick:()=>{D(!1),F(""),k.push("/admin/customers")},className:"w-full text-left px-3 py-3 rounded-xl hover:bg-white/[0.04] flex items-center gap-3 transition-colors",children:[(0,b.jsx)("span",{className:"text-white/20",children:"◉"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-medium",children:c?.customer_name||"Unknown"}),(0,b.jsxs)("p",{className:"text-sm text-white/30",children:[a," · ",d," orders"]})]})]},a)})]}):null,0===G.filter(a=>a.title?.toLowerCase().includes(E.toLowerCase())||a.slug?.toLowerCase().includes(E.toLowerCase())).length&&0===I.filter(a=>a.id?.toLowerCase().includes(E.toLowerCase())||a.customer_name?.toLowerCase().includes(E.toLowerCase())||a.customer_email?.toLowerCase().includes(E.toLowerCase())).length&&(0,b.jsxs)("div",{className:"p-8 text-center text-white/25",children:["No results for “",E,"”"]})]})})]})})]})}a.s(["default",()=>o],88615)}];

//# sourceMappingURL=src_app_admin_layout_tsx_e34ec29d._.js.map
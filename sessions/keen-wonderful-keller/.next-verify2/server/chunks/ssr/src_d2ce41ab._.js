module.exports=[85469,a=>{"use strict";a.i(69387);var b=a.i(60574),c=a.i(79353);let d=new Set(["email","customer_email","customerEmail","phone","password","token","idToken","creditCard","ssn"]);function e(a,b,c,e){let f={level:a,message:b,timestamp:new Date().toISOString()};return c&&Object.keys(c).length>0&&(f.context=function a(b){let c={...b};for(let[b,e]of Object.entries(c))"string"==typeof e&&d.has(b)?c[b]=e.length>3?e.slice(0,3)+"***":"***":"object"!=typeof e||null===e||Array.isArray(e)||(c[b]=a(e));return c}(c)),e instanceof Error?f.error={name:e.name,message:e.message,stack:e.stack}:e&&(f.error={name:"UnknownError",message:String(e)}),f}function f(a){let b=JSON.stringify(a);"error"===a.level||"warn"===a.level?console.error(b):console.log(b)}let g={debug(a,b){},info(a,b){f(e("info",a,b))},warn(a,b,c){f(e("warn",a,b,c))},error(a,b,c){f(e("error",a,b,c))}};function h(a,d,e){(0,b.addDoc)((0,b.collection)(c.db,"admin_audit_log"),{action:a,details:d,admin_email:e||"unknown",timestamp:(0,b.serverTimestamp)(),created_at:new Date().toISOString()}).catch(b=>{g.error("Audit log write failed",{action:a},b)})}a.s(["logAdminAction",()=>h],85469)},32082,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(69387);var d=a.i(60574),e=a.i(79353),f=a.i(85469);function g(){let[a,g]=(0,c.useState)([]),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)("all"),[r,s]=(0,c.useState)(new Set),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(!0);(0,c.useEffect)(()=>{k(!0);let a=(0,d.query)((0,d.collection)(e.db,"orders"),(0,d.orderBy)("created_at","desc"),(0,d.limit)(100)),b=(0,d.onSnapshot)(a,a=>{let b=[];a.forEach(a=>{let c=a.data();!0!==c.is_deleted&&b.push({...c,id:a.id})}),g(b),y(a.docs[a.docs.length-1]||null),A(100===a.docs.length),k(!1)});return()=>b()},[]),(0,c.useEffect)(()=>{let b=a;"all"!==p&&(b=b.filter(a=>a.status===p)),n&&(b=b.filter(a=>a.customer_email.toLowerCase().includes(n.toLowerCase())||a.id.toLowerCase().includes(n.toLowerCase()))),i(b)},[a,n,p]);let B=async(b,c)=>{w(!0);try{let g=a.find(a=>a.id===b),h=g?.status||"unknown";await (0,d.updateDoc)((0,d.doc)(e.db,"orders",b),{status:c,updated_at:new Date().toISOString()}),(0,f.logAdminAction)("order_status_updated",{orderId:b,oldStatus:h,newStatus:c,customerEmail:g?.customer_email}),w(!1)}catch(a){console.error("Error updating order:",a),w(!1)}},C=async()=>{if(window.confirm(`Archive ${r.size} orders? They will be hidden but preserved for records.`)){w(!0);try{let a=new Date().toISOString(),b=Array.from(r);for(let c of b)await (0,d.updateDoc)((0,d.doc)(e.db,"orders",c),{is_deleted:!0,deleted_at:a,updated_at:a});(0,f.logAdminAction)("bulk_delete",{type:"orders",count:r.size,soft:!0,orderIdsCount:b.length}),s(new Set),w(!1)}catch(a){console.error("Error deleting orders:",a),w(!1)}}},D=async()=>{if(x&&z&&!l){m(!0);try{let a=(0,d.query)((0,d.collection)(e.db,"orders"),(0,d.orderBy)("created_at","desc"),(0,d.startAfter)(x),(0,d.limit)(100)),b=await (0,d.getDocs)(a),c=[];b.forEach(a=>{c.push({...a.data(),id:a.id})}),g(a=>[...a,...c]),y(b.docs[b.docs.length-1]||x),A(100===b.docs.length),m(!1)}catch(a){console.error("Error loading more orders:",a),m(!1)}}},E={total:a.length,pending:a.filter(a=>"pending"===a.status).length,processing:a.filter(a=>"processing"===a.status).length,shipped:a.filter(a=>"shipped"===a.status).length,delivered:a.filter(a=>"delivered"===a.status).length,cancelled:a.filter(a=>"cancelled"===a.status).length},F=a.find(a=>a.id===t);return(0,b.jsxs)("div",{className:"min-h-screen bg-black text-white",children:[(0,b.jsxs)("div",{className:"border-b border-white/[0.08] px-6 py-8",children:[(0,b.jsx)("h1",{className:"font-bebas text-4xl tracking-wider",children:"Orders"}),(0,b.jsx)("p",{className:"text-white/60 mt-2",children:"Manage and track all orders"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 px-6 py-6",children:[(0,b.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-2xl p-4",children:[(0,b.jsx)("div",{className:"text-white/60 text-sm",children:"Total Orders"}),(0,b.jsx)("div",{className:"font-bebas text-3xl mt-2",children:E.total})]}),(0,b.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-2xl p-4",children:[(0,b.jsx)("div",{className:"text-amber-300 text-sm",children:"Pending"}),(0,b.jsx)("div",{className:"font-bebas text-3xl mt-2",children:E.pending})]}),(0,b.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-2xl p-4",children:[(0,b.jsx)("div",{className:"text-blue-300 text-sm",children:"Processing"}),(0,b.jsx)("div",{className:"font-bebas text-3xl mt-2",children:E.processing})]}),(0,b.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-2xl p-4",children:[(0,b.jsx)("div",{className:"text-purple-300 text-sm",children:"Shipped"}),(0,b.jsx)("div",{className:"font-bebas text-3xl mt-2",children:E.shipped})]}),(0,b.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-2xl p-4",children:[(0,b.jsx)("div",{className:"text-emerald-300 text-sm",children:"Delivered"}),(0,b.jsx)("div",{className:"font-bebas text-3xl mt-2",children:E.delivered})]}),(0,b.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-2xl p-4",children:[(0,b.jsx)("div",{className:"text-red-300 text-sm",children:"Cancelled"}),(0,b.jsx)("div",{className:"font-bebas text-3xl mt-2",children:E.cancelled})]})]}),(0,b.jsx)("div",{className:"px-6 py-6 border-b border-white/[0.08]",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 w-full md:w-auto",children:[(0,b.jsx)("input",{type:"text",placeholder:"Search by email or ID...",value:n,onChange:a=>o(a.target.value),className:"input-premium"}),(0,b.jsxs)("select",{value:p,onChange:a=>q(a.target.value),className:"input-premium",children:[(0,b.jsx)("option",{value:"all",children:"All Status"}),(0,b.jsx)("option",{value:"pending",children:"Pending"}),(0,b.jsx)("option",{value:"processing",children:"Processing"}),(0,b.jsx)("option",{value:"shipped",children:"Shipped"}),(0,b.jsx)("option",{value:"delivered",children:"Delivered"}),(0,b.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),r.size>0&&(0,b.jsxs)("button",{onClick:C,disabled:v,className:"btn-premium bg-red-500/20 border-red-500/50 text-red-300 hover:bg-red-500/30",children:["Delete (",r.size,")"]})]})}),(0,b.jsx)("div",{className:"px-6 py-6",children:j?(0,b.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border border-white/20 border-t-white"})}):0===h.length?(0,b.jsx)("div",{className:"text-center py-12 text-white/60",children:"No orders found"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"overflow-x-auto rounded-2xl border border-white/[0.08]",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-white/[0.03] border-b border-white/[0.08]",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left",children:(0,b.jsx)("input",{type:"checkbox",checked:r.size===h.length&&h.length>0,onChange:()=>{r.size===h.length?s(new Set):s(new Set(h.map(a=>a.id)))},className:"w-4 h-4 rounded"})}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-white/60 text-sm font-medium",children:"Order ID"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-white/60 text-sm font-medium",children:"Customer"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-white/60 text-sm font-medium",children:"Total"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-white/60 text-sm font-medium",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-white/60 text-sm font-medium",children:"Date"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-white/60 text-sm font-medium",children:"Action"})]})}),(0,b.jsx)("tbody",{children:h.map(a=>(0,b.jsxs)("tr",{className:"border-b border-white/[0.08] hover:bg-white/[0.02]",children:[(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("input",{type:"checkbox",checked:r.has(a.id),onChange:()=>{var b;let c;return b=a.id,void((c=new Set(r)).has(b)?c.delete(b):c.add(b),s(c))},className:"w-4 h-4 rounded"})}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm font-mono",children:a.id.substring(0,8)}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm",children:a.customer_email}),(0,b.jsxs)("td",{className:"px-6 py-4 text-sm",children:["$",a.total_amount.toFixed(2)]}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:`inline-block px-3 py-1 rounded-full text-xs border ${(a=>{switch(a){case"pending":return"bg-amber-500/20 text-amber-300 border-amber-500/50";case"processing":return"bg-blue-500/20 text-blue-300 border-blue-500/50";case"shipped":return"bg-purple-500/20 text-purple-300 border-purple-500/50";case"delivered":return"bg-emerald-500/20 text-emerald-300 border-emerald-500/50";case"cancelled":return"bg-red-500/20 text-red-300 border-red-500/50";default:return"bg-gray-500/20 text-gray-300 border-gray-500/50"}})(a.status)}`,children:a.status.charAt(0).toUpperCase()+a.status.slice(1)})}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-white/60",children:new Date(a.created_at).toLocaleDateString()}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,b.jsx)("button",{onClick:()=>u(a.id),className:"text-blue-400 hover:text-blue-300",children:"View"})})]},a.id))})]})}),(0,b.jsxs)("div",{className:"mt-6 flex justify-between items-center",children:[(0,b.jsxs)("div",{className:"text-white/60 text-sm",children:["Showing ",h.length," of ",a.length," orders"]}),z&&!p&&!n&&(0,b.jsx)("button",{onClick:D,disabled:l,className:"btn-premium",children:l?"Loading...":"Load More"})]})]})}),F&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,b.jsxs)("div",{className:"modal-panel max-w-2xl w-full max-h-96 overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,b.jsx)("h2",{className:"font-bebas text-2xl",children:"Order Details"}),(0,b.jsx)("button",{onClick:()=>u(null),className:"text-white/60 hover:text-white",children:"âœ•"})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h3",{className:"font-bebas text-lg mb-3",children:"Customer Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 bg-white/[0.02] border border-white/[0.08] rounded-xl p-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-white/60 text-sm",children:"Email"}),(0,b.jsx)("div",{className:"text-white",children:F.customer_email})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-white/60 text-sm",children:"Phone"}),(0,b.jsx)("div",{className:"text-white",children:F.customer_phone||"N/A"})]})]})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h3",{className:"font-bebas text-lg mb-3",children:"Shipping Address"}),(0,b.jsx)("div",{className:"bg-white/[0.02] border border-white/[0.08] rounded-xl p-4 text-sm",children:(0,b.jsxs)("div",{className:"text-white",children:[F.shipping_address?.street||"N/A",(0,b.jsx)("br",{}),F.shipping_address?.city,", ",F.shipping_address?.state," ",F.shipping_address?.zip||""]})})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h3",{className:"font-bebas text-lg mb-3",children:"Items"}),(0,b.jsx)("div",{className:"space-y-2",children:F.items?.map((a,c)=>(0,b.jsxs)("div",{className:"flex justify-between text-sm bg-white/[0.02] border border-white/[0.08] rounded-lg p-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-white",children:a.product_name}),(0,b.jsxs)("div",{className:"text-white/60",children:["x",a.quantity]})]}),(0,b.jsxs)("div",{className:"text-white",children:["$",a.price.toFixed(2)]})]},c))})]}),(0,b.jsxs)("div",{className:"mb-6 space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-white/60",children:"Subtotal"}),(0,b.jsxs)("span",{children:["$",(F.total_amount-(F.shipping_cost||0)).toFixed(2)]})]}),F.shipping_cost&&(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-white/60",children:"Shipping"}),(0,b.jsxs)("span",{children:["$",F.shipping_cost.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between font-bebas text-lg border-t border-white/[0.08] pt-2",children:[(0,b.jsx)("span",{children:"Total"}),(0,b.jsxs)("span",{children:["$",F.total_amount.toFixed(2)]})]})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("label",{className:"text-white/60 text-sm",children:"Update Status"}),(0,b.jsxs)("select",{defaultValue:F.status,onChange:a=>B(F.id,a.target.value),disabled:v,className:"input-premium mt-2",children:[(0,b.jsx)("option",{value:"pending",children:"Pending"}),(0,b.jsx)("option",{value:"processing",children:"Processing"}),(0,b.jsx)("option",{value:"shipped",children:"Shipped"}),(0,b.jsx)("option",{value:"delivered",children:"Delivered"}),(0,b.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,b.jsx)("button",{onClick:()=>u(null),className:"btn-premium w-full",children:"Close"})]})})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=src_d2ce41ab._.js.map
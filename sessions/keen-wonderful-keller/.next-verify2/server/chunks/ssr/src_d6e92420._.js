module.exports=[85469,a=>{"use strict";a.i(69387);var b=a.i(60574),c=a.i(79353);let d=new Set(["email","customer_email","customerEmail","phone","password","token","idToken","creditCard","ssn"]);function e(a,b,c,e){let f={level:a,message:b,timestamp:new Date().toISOString()};return c&&Object.keys(c).length>0&&(f.context=function a(b){let c={...b};for(let[b,e]of Object.entries(c))"string"==typeof e&&d.has(b)?c[b]=e.length>3?e.slice(0,3)+"***":"***":"object"!=typeof e||null===e||Array.isArray(e)||(c[b]=a(e));return c}(c)),e instanceof Error?f.error={name:e.name,message:e.message,stack:e.stack}:e&&(f.error={name:"UnknownError",message:String(e)}),f}function f(a){let b=JSON.stringify(a);"error"===a.level||"warn"===a.level?console.error(b):console.log(b)}let g={debug(a,b){},info(a,b){f(e("info",a,b))},warn(a,b,c){f(e("warn",a,b,c))},error(a,b,c){f(e("error",a,b,c))}};function h(a,d,e){(0,b.addDoc)((0,b.collection)(c.db,"admin_audit_log"),{action:a,details:d,admin_email:e||"unknown",timestamp:(0,b.serverTimestamp)(),created_at:new Date().toISOString()}).catch(b=>{g.error("Audit log write failed",{action:a},b)})}a.s(["logAdminAction",()=>h],85469)},87280,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(79353);a.i(69387);var e=a.i(60574),f=a.i(85469);let g={general:"General Inquiry",order:"Order Support",returns:"Returns & Exchanges",partnership:"Partnership",press:"Press & Media",other:"Other"};function h(a){if(!a)return"—";try{return new Date(a).toLocaleDateString("en-CA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"—"}}function i(){let a=()=>{let a=(0,d.getAuthClient)();return a?.currentUser?.email||"unknown"},[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)("all"),[s,t]=(0,c.useState)(new Set),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1);(0,c.useEffect)(()=>{(async()=>{try{let a=(0,e.query)((0,e.collection)(d.db,"contact_messages"),(0,e.orderBy)("timestamp","desc")),b=(await (0,e.getDocs)(a)).docs.map(a=>{let b=a.data(),c="";return b.timestamp instanceof e.Timestamp?c=b.timestamp.toDate().toISOString():b.timestamp&&(c=String(b.timestamp)),{id:a.id,name:b.name||"",email:b.email||"",subject:b.subject||"general",message:b.message||"",timestamp:c,status:b.status||"new",read:!0===b.read}});j(b)}catch(a){console.error("Error fetching contact messages:",a)}l(!1)})()},[]);let A=(0,c.useMemo)(()=>{let a=i;if("unread"===q&&(a=a.filter(a=>!a.read)),"read"===q&&(a=a.filter(a=>a.read)),o.trim()){let b=o.toLowerCase();a=a.filter(a=>a.name.toLowerCase().includes(b)||a.email.toLowerCase().includes(b)||a.subject.toLowerCase().includes(b)||a.message.toLowerCase().includes(b))}return a},[i,q,o]),B=i.length,C=i.filter(a=>!a.read).length,D=async a=>{z(!0);try{let b=!a.read;await (0,e.updateDoc)((0,e.doc)(d.db,"contact_messages",a.id),{read:b}),j(c=>c.map(c=>c.id===a.id?{...c,read:b}:c))}catch(a){console.error("Error toggling read status:",a)}z(!1)},E=async b=>{z(!0);try{await (0,e.deleteDoc)((0,e.doc)(d.db,"contact_messages",b)),(0,f.logAdminAction)("message_deleted",{messageId:b},a()),j(a=>a.filter(a=>a.id!==b)),m===b&&n(null)}catch(a){console.error("Error deleting message:",a)}v(null),z(!1)},F=async()=>{z(!0);try{let a=(0,e.writeBatch)(d.db);i.filter(a=>!a.read).forEach(b=>{a.update((0,e.doc)(d.db,"contact_messages",b.id),{read:!0})}),await a.commit(),j(a=>a.map(a=>({...a,read:!0})))}catch(a){console.error("Error marking all as read:",a)}z(!1)},G=async()=>{z(!0);try{let b=(0,e.writeBatch)(d.db);s.forEach(a=>{b.delete((0,e.doc)(d.db,"contact_messages",a))}),await b.commit(),(0,f.logAdminAction)("bulk_delete",{type:"messages",count:s.size},a()),j(a=>a.filter(a=>!s.has(a.id))),t(new Set),m&&s.has(m)&&n(null)}catch(a){console.error("Error bulk deleting messages:",a)}x(!1),z(!1)};return k?(0,b.jsx)("div",{className:"flex items-center justify-center py-32",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-10 h-10 border-2 border-white/20 border-t-white rounded-full animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-white/30 text-sm tracking-wider",children:"Loading messages..."})]})}):(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-4xl font-bebas tracking-wider",children:"MESSAGES"}),(0,b.jsxs)("p",{className:"text-white/25 text-sm mt-1",children:["Contact form submissions · ",B," total · ",C," unread"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[C>0&&(0,b.jsx)("button",{onClick:F,disabled:y,className:"btn-premium px-4 py-2 bg-white/[0.06] border border-white/[0.1] rounded-xl text-xs tracking-wider uppercase hover:bg-white/[0.1] transition-colors disabled:opacity-50",children:"Mark All Read"}),s.size>0&&(0,b.jsxs)("button",{onClick:()=>x(!0),disabled:y,className:"btn-premium px-4 py-2 bg-red-500/10 border border-red-500/20 rounded-xl text-xs tracking-wider uppercase text-red-400 hover:bg-red-500/20 transition-colors disabled:opacity-50",children:["Delete (",s.size,")"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"p-4 bg-white/[0.02] border border-white/[0.06] rounded-2xl",children:[(0,b.jsx)("p",{className:"text-white/30 text-[10px] uppercase tracking-widest mb-1",children:"Total"}),(0,b.jsx)("p",{className:"text-2xl font-bebas",children:B})]}),(0,b.jsxs)("div",{className:"p-4 bg-white/[0.02] border border-white/[0.06] rounded-2xl",children:[(0,b.jsx)("p",{className:"text-white/30 text-[10px] uppercase tracking-widest mb-1",children:"Unread"}),(0,b.jsx)("p",{className:`text-2xl font-bebas ${C>0?"text-amber-400":""}`,children:C})]}),(0,b.jsxs)("div",{className:"p-4 bg-white/[0.02] border border-white/[0.06] rounded-2xl hidden sm:block",children:[(0,b.jsx)("p",{className:"text-white/30 text-[10px] uppercase tracking-widest mb-1",children:"Read"}),(0,b.jsx)("p",{className:"text-2xl font-bebas text-white/40",children:B-C})]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/20",children:"⌕"}),(0,b.jsx)("input",{type:"text",value:o,onChange:a=>p(a.target.value),placeholder:"Search by name, email, or message...",className:"input-premium w-full pl-10 pr-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-sm focus:outline-none placeholder:text-white/20"})]}),(0,b.jsx)("div",{className:"flex gap-2",children:["all","unread","read"].map(a=>(0,b.jsxs)("button",{onClick:()=>r(a),className:`px-4 py-3 rounded-xl text-xs tracking-wider uppercase transition-all ${q===a?"bg-white text-black font-medium":"bg-white/[0.03] border border-white/[0.08] text-white/40 hover:text-white/60 hover:bg-white/[0.06]"}`,children:[a,"unread"===a&&C>0&&(0,b.jsx)("span",{className:`ml-1.5 px-1.5 py-0.5 rounded-full text-[10px] ${q===a?"bg-black/20 text-black":"bg-amber-500/80 text-white"}`,children:C})]},a))})]}),0===A.length?(0,b.jsxs)("div",{className:"text-center py-20 bg-white/[0.02] border border-white/[0.06] rounded-2xl",children:[(0,b.jsx)("span",{className:"text-4xl block mb-4 opacity-20",children:"✉"}),(0,b.jsx)("h3",{className:"text-xl font-bebas tracking-wider mb-2",children:o||"all"!==q?"No Messages Found":"No Messages Yet"}),(0,b.jsx)("p",{className:"text-white/25 text-sm",children:o?"Try adjusting your search or filter":"Contact form submissions will appear here"})]}):(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 px-4 py-2",children:[(0,b.jsx)("button",{onClick:()=>{s.size===A.length?t(new Set):t(new Set(A.map(a=>a.id)))},className:`w-5 h-5 rounded border transition-colors flex items-center justify-center ${s.size===A.length&&A.length>0?"bg-white border-white text-black":"border-white/20 hover:border-white/40"}`,children:s.size===A.length&&A.length>0&&(0,b.jsx)("span",{className:"text-xs",children:"✓"})}),(0,b.jsx)("span",{className:"text-white/20 text-xs tracking-wider uppercase",children:s.size>0?`${s.size} selected`:`${A.length} message${1!==A.length?"s":""}`})]}),A.map(a=>{let c=m===a.id,f=s.has(a.id);return(0,b.jsxs)("div",{className:`border rounded-2xl transition-all duration-200 overflow-hidden ${!a.read?"bg-white/[0.04] border-white/[0.12]":"bg-white/[0.01] border-white/[0.06]"} ${f?"ring-1 ring-white/20":""}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 px-4 py-4 cursor-pointer hover:bg-white/[0.03] transition-colors",onClick:()=>{n(c?null:a.id),c||a.read||((0,e.updateDoc)((0,e.doc)(d.db,"contact_messages",a.id),{read:!0}).catch(()=>{}),j(b=>b.map(b=>b.id===a.id?{...b,read:!0}:b)))},children:[(0,b.jsx)("button",{onClick:b=>{var c;b.stopPropagation(),c=a.id,t(a=>{let b=new Set(a);return b.has(c)?b.delete(c):b.add(c),b})},className:`w-5 h-5 rounded border transition-colors flex-shrink-0 flex items-center justify-center ${f?"bg-white border-white text-black":"border-white/20 hover:border-white/40"}`,children:f&&(0,b.jsx)("span",{className:"text-xs",children:"✓"})}),(0,b.jsx)("div",{className:"w-2 flex-shrink-0",children:!a.read&&(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-amber-400"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("p",{className:`text-sm truncate ${!a.read?"font-semibold text-white":"text-white/70"}`,children:a.name}),(0,b.jsx)("span",{className:"text-white/15 text-xs hidden sm:inline",children:"·"}),(0,b.jsx)("p",{className:"text-xs text-white/30 truncate hidden sm:block",children:a.email})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,b.jsx)("span",{className:`text-xs px-2 py-0.5 rounded-full ${!a.read?"bg-white/10 text-white/60":"bg-white/[0.04] text-white/25"}`,children:g[a.subject]||a.subject}),(0,b.jsx)("p",{className:"text-xs text-white/20 truncate hidden md:block",children:a.message.length>60?a.message.slice(0,60)+"...":a.message})]})]}),(0,b.jsx)("p",{className:"text-xs text-white/20 flex-shrink-0 hidden sm:block",children:function(a){if(!a)return"";try{let b=Date.now()-new Date(a).getTime(),c=Math.floor(b/6e4);if(c<1)return"Just now";if(c<60)return`${c}m ago`;let d=Math.floor(c/60);if(d<24)return`${d}h ago`;let e=Math.floor(d/24);if(e<7)return`${e}d ago`;return h(a)}catch{return""}}(a.timestamp)}),(0,b.jsx)("span",{className:`text-white/20 flex-shrink-0 transition-transform duration-200 ${c?"rotate-180":""}`,children:"▾"})]}),c&&(0,b.jsxs)("div",{className:"px-4 pb-5 pt-1 border-t border-white/[0.06]",children:[(0,b.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4 mb-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] uppercase tracking-widest text-white/25 mb-1",children:"From"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-white/40",children:a.email})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] uppercase tracking-widest text-white/25 mb-1",children:"Received"}),(0,b.jsx)("p",{className:"text-sm text-white/60",children:h(a.timestamp)})]})]}),(0,b.jsxs)("div",{className:"mb-5",children:[(0,b.jsx)("p",{className:"text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Subject"}),(0,b.jsx)("p",{className:"text-sm text-white/70",children:g[a.subject]||a.subject})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("p",{className:"text-[10px] uppercase tracking-widest text-white/25 mb-2",children:"Message"}),(0,b.jsx)("div",{className:"p-4 bg-white/[0.02] border border-white/[0.06] rounded-xl",children:(0,b.jsx)("p",{className:"text-sm text-white/70 whitespace-pre-wrap leading-relaxed",children:a.message})})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,b.jsx)("a",{href:`mailto:${a.email}?subject=Re: ${encodeURIComponent(g[a.subject]||a.subject)} — DYMNDS`,className:"btn-premium px-5 py-2.5 bg-white text-black text-xs tracking-wider uppercase rounded-xl hover:bg-white/90 transition-colors",children:"Reply"}),(0,b.jsxs)("button",{onClick:()=>D(a),disabled:y,className:"btn-premium px-5 py-2.5 bg-white/[0.06] border border-white/[0.1] text-xs tracking-wider uppercase rounded-xl hover:bg-white/[0.1] transition-colors disabled:opacity-50",children:["Mark as ",a.read?"Unread":"Read"]}),(0,b.jsx)("button",{onClick:()=>v(a.id),disabled:y,className:"btn-premium px-5 py-2.5 bg-red-500/10 border border-red-500/20 text-red-400 text-xs tracking-wider uppercase rounded-xl hover:bg-red-500/20 transition-colors disabled:opacity-50",children:"Delete"})]})]})]},a.id)})]}),u&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"modal-panel bg-neutral-950 border border-white/[0.08] rounded-2xl w-full max-w-md p-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bebas tracking-wider mb-2",children:"Delete Message?"}),(0,b.jsx)("p",{className:"text-white/40 text-sm mb-6",children:"This will permanently delete this message. This action cannot be undone."}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:()=>v(null),className:"flex-1 px-4 py-3 bg-white/[0.06] border border-white/[0.1] rounded-xl text-sm hover:bg-white/[0.1] transition-colors",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>E(u),disabled:y,className:"flex-1 px-4 py-3 bg-red-500/20 border border-red-500/30 text-red-400 rounded-xl text-sm hover:bg-red-500/30 transition-colors disabled:opacity-50",children:"Delete"})]})]})}),w&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"modal-panel bg-neutral-950 border border-white/[0.08] rounded-2xl w-full max-w-md p-6",children:[(0,b.jsxs)("h3",{className:"text-xl font-bebas tracking-wider mb-2",children:["Delete ",s.size," Messages?"]}),(0,b.jsx)("p",{className:"text-white/40 text-sm mb-6",children:"This will permanently delete all selected messages. This action cannot be undone."}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:()=>x(!1),className:"flex-1 px-4 py-3 bg-white/[0.06] border border-white/[0.1] rounded-xl text-sm hover:bg-white/[0.1] transition-colors",children:"Cancel"}),(0,b.jsx)("button",{onClick:G,disabled:y,className:"flex-1 px-4 py-3 bg-red-500/20 border border-red-500/30 text-red-400 rounded-xl text-sm hover:bg-red-500/30 transition-colors disabled:opacity-50",children:"Delete All"})]})]})})]})}a.s(["default",()=>i])}];

//# sourceMappingURL=src_d6e92420._.js.map
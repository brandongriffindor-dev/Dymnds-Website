(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94008,e=>{"use strict";e.i(36180);var t=e.i(98925),s=e.i(53699);e.i(47167);let r=new Set(["email","customer_email","customerEmail","phone","password","token","idToken","creditCard","ssn"]);function l(e,t,s,l){let i={level:e,message:t,timestamp:new Date().toISOString()};return s&&Object.keys(s).length>0&&(i.context=function e(t){let s={...t};for(let[t,l]of Object.entries(s))"string"==typeof l&&r.has(t)?s[t]=l.length>3?l.slice(0,3)+"***":"***":"object"!=typeof l||null===l||Array.isArray(l)||(s[t]=e(l));return s}(s)),l instanceof Error?i.error={name:l.name,message:l.message,stack:l.stack}:l&&(i.error={name:"UnknownError",message:String(l)}),i}function i(e){let t=JSON.stringify(e);"error"===e.level||"warn"===e.level?console.error(t):console.log(t)}let d={debug(e,t){},info(e,t){i(l("info",e,t))},warn(e,t,s){i(l("warn",e,t,s))},error(e,t,s){i(l("error",e,t,s))}};function a(e,r,l){(0,t.addDoc)((0,t.collection)(s.db,"admin_audit_log"),{action:e,details:r,admin_email:l||"unknown",timestamp:(0,t.serverTimestamp)(),created_at:new Date().toISOString()}).catch(t=>{d.error("Audit log write failed",{action:e},t)})}e.s(["logAdminAction",()=>a],94008)},63116,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(36180);var r=e.i(98925),l=e.i(53699),i=e.i(94008);function d(){let[e,d]=(0,s.useState)([]),[a,n]=(0,s.useState)([]),[c,o]=(0,s.useState)(!0),[x,h]=(0,s.useState)(!1),[m,p]=(0,s.useState)(""),[u,b]=(0,s.useState)("all"),[j,g]=(0,s.useState)(new Set),[w,f]=(0,s.useState)(null),[v,N]=(0,s.useState)(!1),[y,S]=(0,s.useState)(null),[_,C]=(0,s.useState)(!0);(0,s.useEffect)(()=>{o(!0);let e=(0,r.query)((0,r.collection)(l.db,"orders"),(0,r.orderBy)("created_at","desc"),(0,r.limit)(100)),t=(0,r.onSnapshot)(e,e=>{let t=[];e.forEach(e=>{let s=e.data();!0!==s.is_deleted&&t.push({...s,id:e.id})}),d(t),S(e.docs[e.docs.length-1]||null),C(100===e.docs.length),o(!1)});return()=>t()},[]),(0,s.useEffect)(()=>{let t=e;"all"!==u&&(t=t.filter(e=>e.status===u)),m&&(t=t.filter(e=>e.customer_email.toLowerCase().includes(m.toLowerCase())||e.id.toLowerCase().includes(m.toLowerCase()))),n(t)},[e,m,u]);let k=async(t,s)=>{N(!0);try{let d=e.find(e=>e.id===t),a=d?.status||"unknown";await (0,r.updateDoc)((0,r.doc)(l.db,"orders",t),{status:s,updated_at:new Date().toISOString()}),(0,i.logAdminAction)("order_status_updated",{orderId:t,oldStatus:a,newStatus:s,customerEmail:d?.customer_email}),N(!1)}catch(e){console.error("Error updating order:",e),N(!1)}},A=async()=>{if(window.confirm(`Archive ${j.size} orders? They will be hidden but preserved for records.`)){N(!0);try{let e=new Date().toISOString(),t=Array.from(j);for(let s of t)await (0,r.updateDoc)((0,r.doc)(l.db,"orders",s),{is_deleted:!0,deleted_at:e,updated_at:e});(0,i.logAdminAction)("bulk_delete",{type:"orders",count:j.size,soft:!0,orderIdsCount:t.length}),g(new Set),N(!1)}catch(e){console.error("Error deleting orders:",e),N(!1)}}},D=async()=>{if(y&&_&&!x){h(!0);try{let e=(0,r.query)((0,r.collection)(l.db,"orders"),(0,r.orderBy)("created_at","desc"),(0,r.startAfter)(y),(0,r.limit)(100)),t=await (0,r.getDocs)(e),s=[];t.forEach(e=>{s.push({...e.data(),id:e.id})}),d(e=>[...e,...s]),S(t.docs[t.docs.length-1]||y),C(100===t.docs.length),h(!1)}catch(e){console.error("Error loading more orders:",e),h(!1)}}},O={total:e.length,pending:e.filter(e=>"pending"===e.status).length,processing:e.filter(e=>"processing"===e.status).length,shipped:e.filter(e=>"shipped"===e.status).length,delivered:e.filter(e=>"delivered"===e.status).length,cancelled:e.filter(e=>"cancelled"===e.status).length},E=e.find(e=>e.id===w);return(0,t.jsxs)("div",{className:"min-h-screen bg-black text-white",children:[(0,t.jsxs)("div",{className:"border-b border-white/[0.08] px-6 py-8",children:[(0,t.jsx)("h1",{className:"font-bebas text-4xl tracking-wider",children:"Orders"}),(0,t.jsx)("p",{className:"text-white/60 mt-2",children:"Manage and track all orders"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 px-6 py-6",children:[(0,t.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-2xl p-4",children:[(0,t.jsx)("div",{className:"text-white/60 text-sm",children:"Total Orders"}),(0,t.jsx)("div",{className:"font-bebas text-3xl mt-2",children:O.total})]}),(0,t.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-2xl p-4",children:[(0,t.jsx)("div",{className:"text-amber-300 text-sm",children:"Pending"}),(0,t.jsx)("div",{className:"font-bebas text-3xl mt-2",children:O.pending})]}),(0,t.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-2xl p-4",children:[(0,t.jsx)("div",{className:"text-blue-300 text-sm",children:"Processing"}),(0,t.jsx)("div",{className:"font-bebas text-3xl mt-2",children:O.processing})]}),(0,t.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-2xl p-4",children:[(0,t.jsx)("div",{className:"text-purple-300 text-sm",children:"Shipped"}),(0,t.jsx)("div",{className:"font-bebas text-3xl mt-2",children:O.shipped})]}),(0,t.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-2xl p-4",children:[(0,t.jsx)("div",{className:"text-emerald-300 text-sm",children:"Delivered"}),(0,t.jsx)("div",{className:"font-bebas text-3xl mt-2",children:O.delivered})]}),(0,t.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-2xl p-4",children:[(0,t.jsx)("div",{className:"text-red-300 text-sm",children:"Cancelled"}),(0,t.jsx)("div",{className:"font-bebas text-3xl mt-2",children:O.cancelled})]})]}),(0,t.jsx)("div",{className:"px-6 py-6 border-b border-white/[0.08]",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 w-full md:w-auto",children:[(0,t.jsx)("input",{type:"text",placeholder:"Search by email or ID...",value:m,onChange:e=>p(e.target.value),className:"input-premium"}),(0,t.jsxs)("select",{value:u,onChange:e=>b(e.target.value),className:"input-premium",children:[(0,t.jsx)("option",{value:"all",children:"All Status"}),(0,t.jsx)("option",{value:"pending",children:"Pending"}),(0,t.jsx)("option",{value:"processing",children:"Processing"}),(0,t.jsx)("option",{value:"shipped",children:"Shipped"}),(0,t.jsx)("option",{value:"delivered",children:"Delivered"}),(0,t.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),j.size>0&&(0,t.jsxs)("button",{onClick:A,disabled:v,className:"btn-premium bg-red-500/20 border-red-500/50 text-red-300 hover:bg-red-500/30",children:["Delete (",j.size,")"]})]})}),(0,t.jsx)("div",{className:"px-6 py-6",children:c?(0,t.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border border-white/20 border-t-white"})}):0===a.length?(0,t.jsx)("div",{className:"text-center py-12 text-white/60",children:"No orders found"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"overflow-x-auto rounded-2xl border border-white/[0.08]",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-white/[0.03] border-b border-white/[0.08]",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 text-left",children:(0,t.jsx)("input",{type:"checkbox",checked:j.size===a.length&&a.length>0,onChange:()=>{j.size===a.length?g(new Set):g(new Set(a.map(e=>e.id)))},className:"w-4 h-4 rounded"})}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-white/60 text-sm font-medium",children:"Order ID"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-white/60 text-sm font-medium",children:"Customer"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-white/60 text-sm font-medium",children:"Total"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-white/60 text-sm font-medium",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-white/60 text-sm font-medium",children:"Date"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-white/60 text-sm font-medium",children:"Action"})]})}),(0,t.jsx)("tbody",{children:a.map(e=>(0,t.jsxs)("tr",{className:"border-b border-white/[0.08] hover:bg-white/[0.02]",children:[(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("input",{type:"checkbox",checked:j.has(e.id),onChange:()=>{var t;let s;return t=e.id,void((s=new Set(j)).has(t)?s.delete(t):s.add(t),g(s))},className:"w-4 h-4 rounded"})}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm font-mono",children:e.id.substring(0,8)}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm",children:e.customer_email}),(0,t.jsxs)("td",{className:"px-6 py-4 text-sm",children:["$",e.total_amount.toFixed(2)]}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:`inline-block px-3 py-1 rounded-full text-xs border ${(e=>{switch(e){case"pending":return"bg-amber-500/20 text-amber-300 border-amber-500/50";case"processing":return"bg-blue-500/20 text-blue-300 border-blue-500/50";case"shipped":return"bg-purple-500/20 text-purple-300 border-purple-500/50";case"delivered":return"bg-emerald-500/20 text-emerald-300 border-emerald-500/50";case"cancelled":return"bg-red-500/20 text-red-300 border-red-500/50";default:return"bg-gray-500/20 text-gray-300 border-gray-500/50"}})(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-white/60",children:new Date(e.created_at).toLocaleDateString()}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,t.jsx)("button",{onClick:()=>f(e.id),className:"text-blue-400 hover:text-blue-300",children:"View"})})]},e.id))})]})}),(0,t.jsxs)("div",{className:"mt-6 flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"text-white/60 text-sm",children:["Showing ",a.length," of ",e.length," orders"]}),_&&!u&&!m&&(0,t.jsx)("button",{onClick:D,disabled:x,className:"btn-premium",children:x?"Loading...":"Load More"})]})]})}),E&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"modal-panel max-w-2xl w-full max-h-96 overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,t.jsx)("h2",{className:"font-bebas text-2xl",children:"Order Details"}),(0,t.jsx)("button",{onClick:()=>f(null),className:"text-white/60 hover:text-white",children:"âœ•"})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h3",{className:"font-bebas text-lg mb-3",children:"Customer Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 bg-white/[0.02] border border-white/[0.08] rounded-xl p-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-white/60 text-sm",children:"Email"}),(0,t.jsx)("div",{className:"text-white",children:E.customer_email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-white/60 text-sm",children:"Phone"}),(0,t.jsx)("div",{className:"text-white",children:E.customer_phone||"N/A"})]})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h3",{className:"font-bebas text-lg mb-3",children:"Shipping Address"}),(0,t.jsx)("div",{className:"bg-white/[0.02] border border-white/[0.08] rounded-xl p-4 text-sm",children:(0,t.jsxs)("div",{className:"text-white",children:[E.shipping_address?.street||"N/A",(0,t.jsx)("br",{}),E.shipping_address?.city,", ",E.shipping_address?.state," ",E.shipping_address?.zip||""]})})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h3",{className:"font-bebas text-lg mb-3",children:"Items"}),(0,t.jsx)("div",{className:"space-y-2",children:E.items?.map((e,s)=>(0,t.jsxs)("div",{className:"flex justify-between text-sm bg-white/[0.02] border border-white/[0.08] rounded-lg p-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-white",children:e.product_name}),(0,t.jsxs)("div",{className:"text-white/60",children:["x",e.quantity]})]}),(0,t.jsxs)("div",{className:"text-white",children:["$",e.price.toFixed(2)]})]},s))})]}),(0,t.jsxs)("div",{className:"mb-6 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-white/60",children:"Subtotal"}),(0,t.jsxs)("span",{children:["$",(E.total_amount-(E.shipping_cost||0)).toFixed(2)]})]}),E.shipping_cost&&(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-white/60",children:"Shipping"}),(0,t.jsxs)("span",{children:["$",E.shipping_cost.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between font-bebas text-lg border-t border-white/[0.08] pt-2",children:[(0,t.jsx)("span",{children:"Total"}),(0,t.jsxs)("span",{children:["$",E.total_amount.toFixed(2)]})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"text-white/60 text-sm",children:"Update Status"}),(0,t.jsxs)("select",{defaultValue:E.status,onChange:e=>k(E.id,e.target.value),disabled:v,className:"input-premium mt-2",children:[(0,t.jsx)("option",{value:"pending",children:"Pending"}),(0,t.jsx)("option",{value:"processing",children:"Processing"}),(0,t.jsx)("option",{value:"shipped",children:"Shipped"}),(0,t.jsx)("option",{value:"delivered",children:"Delivered"}),(0,t.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,t.jsx)("button",{onClick:()=>f(null),className:"btn-premium w-full",children:"Close"})]})})]})}e.s(["default",()=>d])}]);